<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Francisco Event Photographers - SF Event Photo</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="San Francisco's premier event photography agency. Cinematic event coverage trusted by the world's top brands. Same-day delivery available.">
    <meta name="keywords" content="San Francisco event photographers, event photography SF, corporate photography, brand activation photography, conference photographer, professional event photos">
    <meta name="author" content="SF Event Photo">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sfeventphoto.com/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sfeventphoto.com/">
    <meta property="og:title" content="San Francisco Event Photographers - SF Event Photo">
    <meta property="og:description" content="San Francisco's premier event photography agency. Cinematic event coverage trusted by the world's top brands.">
    <meta property="og:image" content="https://sfeventphoto.com/og-image.jpg">
    <meta property="og:site_name" content="SF Event Photo">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://sfeventphoto.com/">
    <meta name="twitter:title" content="San Francisco Event Photographers - SF Event Photo">
    <meta name="twitter:description" content="San Francisco's premier event photography agency. Cinematic event coverage trusted by the world's top brands.">
    <meta name="twitter:image" content="https://sfeventphoto.com/og-image.jpg">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "SF Event Photo",
        "description": "Professional event photography agency specializing in corporate events, brand activations, conferences, and executive portraits in San Francisco.",
        "url": "https://sfeventphoto.com",
        "logo": "https://sfeventphoto.com/logo.png",
        "image": "https://sfeventphoto.com/og-image.jpg",
        "telephone": "+1-415-555-1234",
        "email": "hello@sfeventphoto.com",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "San Francisco",
            "addressRegion": "CA",
            "addressCountry": "US"
        },
        "areaServed": {
            "@type": "City",
            "name": "San Francisco"
        },
        "serviceType": [
            "Event Photography",
            "Corporate Photography",
            "Brand Activation Photography",
            "Conference Photography",
            "Executive Portraits",
            "Video Production"
        ]
    }
    </script>

    <!-- Preload fonts -->
    <link rel="preload" href="./fonts/PPNeueYork-NormalLight.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="./fonts/PPNeueYork-NormalRegular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="./fonts/PPNeueYork-NormalMedium.woff2" as="font" type="font/woff2" crossorigin>
    <!-- Preconnect to CDN -->
    <link rel="preconnect" href="https://imagedelivery.net">

    <style>
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalLight.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalLight.woff') format('woff');
            font-weight: 300; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalRegular.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalRegular.woff') format('woff');
            font-weight: 400; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalMedium.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalMedium.woff') format('woff');
            font-weight: 500; font-style: normal; font-display: swap;
        }

        :root {
            --black: #1a1a1a;
            --white: #ffffff;
            --gray-light: #f8f8f8;
            --gray-mid: #e8e8e8;
            --gray-dark: #888888;
            --gap: 6px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'PP Neue York', Georgia, serif;
            color: #e0e0e0;
            background: #0a0a0a;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* =======================================
           HEADER
           ======================================= */
        .header {
            position: sticky; top: 0;
            background: #0a0a0a;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            transition: background 0.4s, border-color 0.4s;
        }

        /* ── Scrolled state: white header + tag strip ── */
        body.scrolled .header {
            background: #ffffff;
            border-bottom-color: rgba(0,0,0,0.08);
        }
        body.scrolled .logo,
        body.scrolled .nav a,
        body.scrolled .hamburger svg {
            color: #1a1a1a;
            stroke: #1a1a1a;
        }
        body.scrolled .nav a { color: #1a1a1a; }
        body.scrolled .cart-count {
            background: #1a1a1a;
            color: #fff;
        }
        body.scrolled .tag-strip {
            background: #fff;
        }
        body.scrolled .tag-pill {
            color: rgba(0,0,0,0.5);
            border-color: rgba(0,0,0,0.15);
        }
        body.scrolled .tag-pill:hover {
            color: rgba(0,0,0,0.9);
            border-color: rgba(0,0,0,0.4);
        }
        body.scrolled .tag-pill.active {
            color: #fff;
            background: #1a1a1a;
            border-color: #1a1a1a;
        }
        body.scrolled .tb-btn {
            color: rgba(0,0,0,0.5);
        }
        body.scrolled .tb-btn:hover {
            color: #1a1a1a;
        }
        body.scrolled .tb-btn svg {
            stroke: #1a1a1a;
        }
        body.scrolled .tag-strip-inline-close svg {
            stroke: #1a1a1a;
        }
        body.scrolled .tag-strip-inline-input {
            color: #1a1a1a;
            border-color: rgba(0,0,0,0.15);
        }
        body.scrolled .tag-strip-inline-input::placeholder {
            color: rgba(0,0,0,0.35);
        }
        body.scrolled .nav-dropdown-trigger {
            color: #1a1a1a;
        }
        body.scrolled .nav-dropdown-trigger svg {
            stroke: #1a1a1a;
        }
        body.scrolled .cart-link svg {
            stroke: #1a1a1a;
        }
        body.scrolled .auth-link {
            color: #1a1a1a;
        }
        body.scrolled .press-feed-btn {
            color: rgba(0,0,0,0.6);
            border-color: rgba(0,0,0,0.3);
        }
        body.scrolled .press-feed-btn svg {
            stroke: rgba(0,0,0,0.6);
        }
        body.scrolled .press-feed-btn:hover,
        body.scrolled .press-feed-btn.active {
            background: #1a1a1a;
            color: #fff;
            border-color: #1a1a1a;
        }
        body.scrolled .press-feed-btn:hover svg,
        body.scrolled .press-feed-btn.active svg {
            stroke: #fff;
        }

        /* Scrolled state: white gallery + reviews background */
        body.scrolled .main-content {
            background: #fff;
        }
        body.scrolled .gallery-section {
            background: #fff;
        }
        body.scrolled .g-project {
            background: #eee;
        }
        body.scrolled .g-review-slideshow {
            background: #f5f5f5;
            border-color: rgba(0,0,0,0.08);
        }
        body.scrolled .g-review-slide .quote-text {
            color: #1a1a1a;
        }
        body.scrolled .g-review-slide .quote-attr {
            color: rgba(0,0,0,0.5);
        }
        body.scrolled .g-review-slide .quote-attr span {
            color: #1a1a1a;
        }
        body.scrolled .g-review-slide .quote-stars svg {
            fill: #1a1a1a;
        }
        body.scrolled .g-review-dot {
            background: rgba(0,0,0,0.2);
        }
        body.scrolled .g-review-dot.active {
            background: #1a1a1a;
        }
        body.scrolled .footer {
            background: #fff;
            border-top-color: rgba(0,0,0,0.08);
        }
        body.scrolled .footer-left {
            color: rgba(0,0,0,0.5);
        }
        body.scrolled .footer-left a {
            color: rgba(0,0,0,0.5);
        }
        body.scrolled .footer-left a:hover {
            color: #1a1a1a;
        }
        body.scrolled .footer-right a {
            color: rgba(0,0,0,0.5);
        }
        body.scrolled .footer-right a:hover {
            color: #1a1a1a;
        }

        .header-inner {
            display: flex; justify-content: space-between;
            align-items: center; padding: 1.25rem 1.5rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
        }

        .hamburger svg {
            width: 24px;
            height: 24px;
            stroke: #e0e0e0;
            stroke-width: 1.5;
        }

        .logo {
            font-size: 0.9rem; font-weight: 400;
            letter-spacing: 0.08em; text-decoration: none; color: #e0e0e0;
        }

        .nav { display: flex; gap: 2.5rem; align-items: center; }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            align-items: center;
        }

        .nav a {
            text-decoration: none; color: #e0e0e0;
            font-size: 0.85rem; font-weight: 400;
            letter-spacing: 0.1em; text-transform: uppercase;
            transition: opacity 0.2s;
        }

        .nav a:hover { opacity: 0.5; }

        /* Nav Dropdowns */
        .nav-dropdown {
            position: relative;
        }

        .nav-dropdown-trigger {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            text-decoration: none;
            color: #e0e0e0;
            font-size: 0.85rem;
            font-weight: 400;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            transition: opacity 0.2s;
            cursor: pointer;
            background: none;
            border: none;
            font-family: inherit;
            padding: 0;
        }

        .nav-dropdown-trigger:hover { opacity: 0.5; }

        .nav-dropdown-trigger svg {
            width: 8px;
            height: 8px;
            stroke: #e0e0e0;
            stroke-width: 2.5;
            transition: transform 0.2s;
        }

        .nav-dropdown.open .nav-dropdown-trigger svg {
            transform: rotate(180deg);
        }

        .nav-dropdown-panel {
            display: none;
            position: absolute;
            top: calc(100% + 12px);
            left: 0;
            min-width: 180px;
            background: #1a1a1a;
            border: 1px solid rgba(255,255,255,0.12);
            z-index: 100;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
        }

        .nav-dropdown.open .nav-dropdown-panel {
            display: block;
        }

        .nav-dropdown-panel a {
            display: block;
            padding: 0.7rem 1rem;
            font-size: 0.8rem;
            font-weight: 400;
            letter-spacing: 0.05em;
            text-transform: none;
            color: rgba(255,255,255,0.6);
            text-decoration: none;
            transition: all 0.15s;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .nav-dropdown-panel a:last-child { border-bottom: none; }

        .nav-dropdown-panel a:hover {
            color: #fff;
            background: rgba(255,255,255,0.05);
            opacity: 1;
        }

        .nav-actions {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .cart-link { position: relative; display: flex; align-items: center; text-decoration: none; }
        .cart-link svg { width: 24px; height: 24px; stroke-width: 1.5; }

        .cart-badge {
            position: absolute; top: -6px; right: -10px;
            background: #e53935; color: white;
            font-size: 0.65rem; font-weight: 500;
            min-width: 18px; height: 18px; border-radius: 50%;
            display: none; align-items: center; justify-content: center;
        }

        .cart-badge.show { display: flex; }

        .auth-link {
            text-decoration: none; color: #e0e0e0;
            font-size: 0.85rem; font-weight: 400;
            letter-spacing: 0.1em; text-transform: uppercase; transition: opacity 0.2s;
        }

        .auth-link:hover { opacity: 0.5; }

        /* Mobile menu overlay */
        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--white);
            z-index: 2000;
            flex-direction: column;
            padding: 1.5rem;
        }

        .mobile-menu.open {
            display: flex;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
        }

        .mobile-menu-close svg {
            width: 28px;
            height: 28px;
            stroke: var(--black);
            stroke-width: 1.5;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .mobile-menu-links a {
            display: block;
            padding: 1.25rem 0;
            text-decoration: none;
            color: var(--black);
            font-size: 1.25rem;
            font-weight: 400;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--gray-mid);
        }

        .mobile-menu-links a:first-child {
            border-top: 1px solid var(--gray-mid);
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            .nav-links {
                display: none;
            }
            .nav {
                gap: 1.5rem;
            }
            .nav-actions {
                gap: 1.25rem;
            }
            .auth-link {
                font-size: 0.75rem;
            }
        }

        /* User Menu */
        .user-menu { position: relative; }

        .user-menu-btn {
            background: none; border: none; cursor: pointer;
            display: flex; align-items: center; gap: 0.4rem;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem; font-weight: 400;
            letter-spacing: 0.1em; text-transform: uppercase;
            color: #e0e0e0; padding: 0; transition: opacity 0.2s;
        }

        .user-menu-btn:hover { opacity: 0.5; }
        .user-menu-btn svg { width: 20px; height: 20px; stroke-width: 1.5; }

        .user-dropdown {
            position: absolute; top: calc(100% + 10px); right: 0;
            background: var(--white); border: 1px solid var(--gray-mid);
            min-width: 200px; display: none; z-index: 100;
        }

        .user-dropdown.show { display: block; }

        .user-dropdown a, .user-dropdown button {
            display: block; width: 100%; padding: 1rem 1.25rem;
            text-align: left; font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem; font-weight: 400; letter-spacing: 0.05em;
            text-transform: uppercase; text-decoration: none;
            color: var(--black); background: none; border: none;
            border-bottom: 1px solid var(--gray-mid);
            cursor: pointer; transition: background 0.2s;
        }

        .user-dropdown a:hover, .user-dropdown button:hover { background: var(--gray-light); }
        .user-dropdown .signout-btn { background: var(--black); color: var(--white); border: none; }
        .user-dropdown .signout-btn:hover { opacity: 0.9; background: var(--black); }

        .user-dropdown .user-email {
            font-size: 0.7rem; color: rgba(255,255,255,0.7);
            text-transform: none; letter-spacing: 0; margin-top: 0.25rem;
        }

        /* =======================================
           VIDEO HERO - Full Viewport
           ======================================= */
        .video-hero {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            min-height: 500px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }

        /* Spacer pushes .main-content below the viewport so fixed video is visible */
        .hero-spacer {
            height: 100vh;
            min-height: 500px;
            position: relative;
            z-index: 2;
            pointer-events: none;
        }

        /* Lock scroll during crossfade */
        body.hero-locked {
            overflow: hidden;
        }

        .main-content {
            position: relative;
            z-index: 10;
            background: #0a0a0a;
            transition: background 0.4s;
        }

        .main-content::before {
            display: none;
        }

        .video-hero-bg {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
        }

        .video-hero-overlay {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(10, 10, 10, 0.3) 0%,
                rgba(10, 10, 10, 0.15) 40%,
                rgba(10, 10, 10, 0.3) 70%,
                rgba(10, 10, 10, 0.85) 100%
            );
            z-index: 1;
        }

        .video-hero-content {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .video-hero-headline,
        .video-hero-slogan {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            text-align: center;
            padding: 0 2rem;
            will-change: opacity, transform;
        }

        /* Slogan: shows first — light, uppercase, Matte-style tagline */
        .video-hero-slogan {
            font-family: 'PP Neue York', Georgia, serif;
            font-size: clamp(1rem, 1.6vw, 1.25rem);
            font-weight: 400;
            color: rgba(255,255,255,0.75);
            text-transform: uppercase;
            letter-spacing: 0.18em;
            line-height: 1.6;
            white-space: nowrap;
            text-shadow: 0 1px 20px rgba(0,0,0,0.3);
        }

        .video-hero-subtitle {
            display: block;
            font-size: clamp(0.8rem, 1.2vw, 1rem);
            font-weight: 300;
            margin-top: 0.75rem;
            color: rgba(255,255,255,0.75);
        }

        /* Headline: fades in on scroll, stays centered until content covers it */
        .video-hero-headline {
            font-family: 'PP Neue York', Georgia, serif;
            font-size: clamp(3.5rem, 8vw, 7rem);
            font-weight: 500;
            font-style: italic;
            color: #fff;
            letter-spacing: -0.03em;
            line-height: 1;
            opacity: 0;
            text-shadow: 0 2px 40px rgba(0,0,0,0.5);
        }

        /* Inline search in toolbar — absolute overlay so tags stay centered */
        .tag-strip-inline-search {
            display: flex;
            align-items: center;
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 400px;
            max-width: 50%;
            padding-left: 1.5rem;
            z-index: 10;
            background: inherit;
            border-bottom: none;
        }

        .tag-strip-inline-input {
            flex: 1;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem;
            font-weight: 300;
            color: #d4d4d4;
            padding: 0.6rem 0;
            min-width: 0;
        }

        .tag-strip-inline-input:focus { outline: none; }
        .tag-strip-inline-input::placeholder { color: rgba(255,255,255,0.25); }

        .tag-strip-inline-close {
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            opacity: 0.35;
            transition: opacity 0.2s;
        }

        .tag-strip-inline-close svg { stroke: #fff; }
        .tag-strip-inline-close:hover { opacity: 0.7; }

        .video-hero-search {
            display: flex;
            max-width: 500px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .video-hero-search input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.95rem;
            font-weight: 300;
            background: transparent;
            color: #fff;
            min-width: 0;
        }

        .video-hero-search input:focus { outline: none; }
        .video-hero-search input::placeholder { color: rgba(255,255,255,0.5); }

        .video-hero-search button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 1.25rem;
            background: none;
            border: none;
            cursor: pointer;
        }

        .video-hero-search button svg {
            width: 20px;
            height: 20px;
            stroke: rgba(255,255,255,0.8);
            stroke-width: 2;
        }

        .video-hero-search button:hover svg { stroke: #fff; }

        /* Scroll indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 2.5rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            opacity: 0.6;
            animation: scrollPulse 2s ease-in-out infinite;
        }

        .scroll-indicator span {
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: #fff;
        }

        .scroll-indicator svg {
            width: 20px;
            height: 20px;
            stroke: #fff;
            stroke-width: 1.5;
        }

        @keyframes scrollPulse {
            0%, 100% { opacity: 0.4; transform: translateX(-50%) translateY(0); }
            50% { opacity: 0.8; transform: translateX(-50%) translateY(6px); }
        }

        @media (max-width: 768px) {
            .video-hero {
                height: 100vh;
                min-height: 500px;
            }
            .hero-spacer {
                height: 100vh;
                min-height: 500px;
            }
            .video-hero-slogan {
                white-space: normal;
                letter-spacing: 0.08em;
                font-size: clamp(0.75rem, 3.2vw, 1rem);
                padding: 0 1.5rem;
            }
            .tag-strip-inline-search { max-width: 200px; }
            .tag-strip-inline-input { font-size: 16px; }
            .tag-strip-search-input { font-size: 16px; }
        }

        @media (max-width: 500px) {
            .hero-spacer {
                height: 100vh;
                min-height: 450px;
            }
            .video-hero {
                height: 100vh;
                min-height: 450px;
            }
            .scroll-indicator {
                bottom: 1.5rem;
            }
        }

        /* =======================================
           TAG STRIP - Sticky below header
           ======================================= */
        .tag-strip {
            display: flex;
            align-items: center;
            background: #0a0a0a;
            padding: 0 1.5rem;
            position: sticky;
            top: var(--header-h, 56px);
            z-index: 999;
            gap: 0;
            transition: background 0.3s, border-color 0.3s;
        }

        .tag-strip-left {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        /* Search toggle (far left of tag strip) */
        .tag-strip-search-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.75rem 0.75rem 0.75rem 0;
            opacity: 0.4;
            transition: opacity 0.2s;
        }

        .tag-strip-search-toggle svg {
            stroke: #fff;
        }

        .tag-strip-search-toggle:hover {
            opacity: 0.8;
        }

        .search-cursor {
            display: inline-block;
            width: 1px;
            height: 14px;
            background: #fff;
            margin-left: 5px;
            animation: cursorBlink 1.2s ease-in-out infinite;
        }

        @keyframes cursorBlink {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0; }
        }

        body.scrolled .tag-strip-search-toggle svg {
            stroke: #1a1a1a;
        }

        body.scrolled .search-cursor {
            background: #1a1a1a;
        }

        .tag-strip-center {
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding: 0 1rem;
        }

        .tag-strip-center::-webkit-scrollbar { display: none; }

        .tag-pills {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 0;
            flex-shrink: 0;
        }

        .tag-pill {
            padding: 0.45rem 1.1rem;
            background: none;
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.8rem;
            font-weight: 400;
            color: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .tag-pill:hover {
            color: rgba(255,255,255,0.9);
            border-color: rgba(255,255,255,0.4);
        }

        .tag-pill.active {
            color: #0a0a0a;
            background: #fff;
            border-color: #fff;
        }

        /* More dropdown — hidden by default */
        .ts-more-wrap { display: none; }
        .ts-more-btn { display: flex; align-items: center; }
        .ts-more-panel { min-width: 130px; }

        /* Progressive collapse breakpoints */
        @media (max-width: 1100px) {
            .tag-pill.tag-p1 { display: none; }
            .ts-more-wrap { display: block; }
            /* Hide options that are still visible as pills */
            .ts-more-panel .ts-more-option[data-cat="video"],
            .ts-more-panel .ts-more-option[data-cat="corporate"] { display: none; }
        }

        @media (max-width: 950px) {
            .tag-pill.tag-p2 { display: none; }
            .ts-more-panel .ts-more-option[data-cat="corporate"] { display: block; }
        }

        @media (max-width: 850px) {
            .tag-pill.tag-p3 { display: none; }
            .ts-more-panel .ts-more-option[data-cat="video"] { display: block; }
        }

        /* Mobile: Event Type dropdown for tag strip */
        .tag-strip-mobile-dropdown {
            display: none;
        }

        @media (max-width: 768px) {
            .tag-strip {
                padding: 0 0.75rem;
            }
            .tag-pills-desktop, .ts-more-wrap {
                display: none !important;
            }
            .tag-strip-mobile-dropdown {
                display: none !important;
            }
            .tag-strip-center {
                display: none;
            }
            .tag-strip-left {
                flex: 1;
            }
        }

        /* Sort dropdown (inside tag strip) */
        .tb-dropdown {
            position: relative;
            flex-shrink: 0;
        }

        .tb-btn {
            display: flex; align-items: center; gap: 0.5rem;
            padding: 1rem 1.5rem;
            background: none; border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.9rem; font-weight: 400;
            color: rgba(255,255,255,0.4); cursor: pointer;
            white-space: nowrap; transition: color 0.2s;
            height: 100%;
            flex-shrink: 0;
        }

        .tag-strip-left .tb-btn {
            padding-left: 0;
        }

        .tb-btn:hover { color: rgba(255,255,255,0.8); }

        .tb-btn svg {
            width: 10px; height: 10px; stroke-width: 2.5;
            transition: transform 0.2s;
        }

        .tb-btn.open svg { transform: rotate(180deg); }

        .tb-panel {
            position: absolute; top: 100%; left: 0;
            min-width: 140px; background: #1a1a1a;
            border: 1px solid rgba(255,255,255,0.15);
            z-index: 100; display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .tb-panel.show { display: block; }

        .tb-option {
            display: block; width: 100%;
            padding: 0.75rem 1.25rem;
            background: none; border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.9rem; font-weight: 400;
            color: rgba(255,255,255,0.5); text-align: left;
            cursor: pointer; transition: all 0.2s;
        }

        .tb-option:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .tb-option.active { color: #fff; font-weight: 500; }

        /* Press Feed toggle */
        .tag-strip-right {
            display: flex;
            align-items: center;
            margin-left: auto;
            flex-shrink: 0;
        }

        .press-feed-btn {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            background: none;
            border: 1.5px solid rgba(255,255,255,0.4);
            border-radius: 20px;
            padding: 0.45rem 1rem;
            font-family: inherit;
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .press-feed-btn svg {
            stroke: rgba(255,255,255,0.7);
        }

        .press-feed-btn:hover,
        .press-feed-btn.active {
            background: var(--white);
            color: var(--black);
            border-color: var(--white);
        }

        .press-feed-btn:hover svg,
        .press-feed-btn.active svg {
            stroke: var(--black);
        }

        /* Prevent :hover from sticking on touch devices (but keep .active style) */
        @media (hover: none) {
            .press-feed-btn:hover:not(.active) {
                background: none;
                color: rgba(255,255,255,0.7);
                border-color: rgba(255,255,255,0.4);
            }
            .press-feed-btn:hover:not(.active) svg {
                stroke: rgba(255,255,255,0.7);
            }
            body.scrolled .press-feed-btn:hover:not(.active) {
                background: none;
                color: rgba(0,0,0,0.6);
                border-color: rgba(0,0,0,0.3);
            }
            body.scrolled .press-feed-btn:hover:not(.active) svg {
                stroke: rgba(0,0,0,0.6);
            }
        }

        /* Toolbar search bar -- visible only in press feed mode */
        .tag-strip-search {
            display: none;
            flex: 1;
            justify-content: center;
            align-items: center;
            padding: 0.5rem 1rem;
        }

        .tag-strip-search-container {
            display: flex;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.05);
            width: 100%;
            max-width: 480px;
        }

        .tag-strip-search-input {
            flex: 1;
            padding: 0.6rem 1rem;
            border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem;
            font-weight: 300;
            background: transparent;
            color: #e0e0e0;
            min-width: 0;
        }

        .tag-strip-search-input:focus { outline: none; }
        .tag-strip-search-input::placeholder { color: rgba(255,255,255,0.35); }

        .tag-strip-search-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.6rem 0.75rem;
            background: none;
            border: none;
            cursor: pointer;
        }

        .tag-strip-search-btn svg {
            width: 18px;
            height: 18px;
            stroke: #fff;
            stroke-width: 2;
        }

        .tag-strip-search-btn:hover svg { opacity: 0.6; }

        /* Press Feed active state */
        body.press-feed-active .video-hero { display: none; }
        body.press-feed-active .hero-spacer { display: none; }
        body.press-feed-active .tag-strip-center { display: none; }
        body.press-feed-active .tag-strip-search { display: flex; }

        @media (max-width: 768px) {
            .tag-strip-right {
                margin-right: 0;
            }
            .press-feed-btn {
                padding: 0.35rem 0.75rem;
                font-size: 0.65rem;
            }
            body.press-feed-active .tag-strip {
                overflow: visible;
            }
            body.press-feed-active .tag-strip-left {
                flex: 0 0 auto;
            }
            body.press-feed-active .tag-strip-search {
                display: none;
            }
            .tag-strip-search {
                padding: 0.5rem 0.5rem;
                min-width: 0;
                overflow: hidden;
            }
            .tag-strip-search-container { max-width: 100%; min-width: 0; }
            .tag-strip-search-input { padding: 0.5rem 0.75rem; font-size: 0.8rem; min-width: 0; }
            .tag-strip-search-btn { padding: 0.5rem 0.6rem; flex-shrink: 0; }
            .tag-strip-search-btn svg { width: 16px; height: 16px; }
            .tb-btn { padding: 1rem 1.25rem; font-size: 0.9rem; }
            .tb-option { font-size: 0.9rem; }
        }

        /* =======================================
           GALLERY GRID
           ======================================= */
        .gallery-section { padding: var(--gap) 1.5rem 5rem; background: #0a0a0a; transition: background 0.4s; }

        .unified-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--gap);
        }

        /* CLASSIC VIEW */
        .g-project {
            position: relative; overflow: hidden;
            cursor: pointer; background: #222;
            aspect-ratio: 4 / 3;
            contain: layout style paint;
            will-change: transform;
        }

        .g-project img {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
            transition: transform 0.4s ease;
            content-visibility: auto;
        }

        .g-project:hover img { transform: scale(1.03); }

        /* Private project overlay */
        .g-private-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.65);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            pointer-events: none;
        }

        .g-lock-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .g-lock-icon svg {
            width: 28px;
            height: 28px;
            stroke: rgba(255, 255, 255, 0.7);
        }

        .g-overlay {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
            padding: 4rem 1rem 1rem; color: white;
            z-index: 2;
        }

        .g-date { font-size: 0.75rem; font-weight: 300; letter-spacing: 0.02em; margin-bottom: 0.35rem; opacity: 0.9; }
        .g-title { font-size: 0.9rem; font-weight: 500; letter-spacing: 0.08em; text-transform: uppercase; line-height: 1.35; margin-bottom: 0.3rem; }
        .g-venue { font-size: 0.8rem; font-weight: 300; opacity: 0.85; margin-bottom: 0.5rem; }
        .g-count { display: flex; align-items: center; gap: 0.4rem; font-size: 0.75rem; font-weight: 300; opacity: 0.8; }
        .g-count svg { width: 14px; height: 14px; }

        /* =======================================
           REVIEW SLIDESHOW TILE
           ======================================= */
        .g-review-slideshow {
            grid-column: span 2; grid-row: span 2;
            position: relative; overflow: hidden;
            background: #111;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .g-review-slide {
            position: absolute; inset: 0;
            display: flex; flex-direction: column; justify-content: center;
            padding: 2.5rem 3rem 3rem;
            opacity: 0; transition: opacity 0.8s ease; z-index: 0;
        }

        .g-review-slide.active { opacity: 1; z-index: 1; }

        .g-review-slide .quote-text {
            font-size: 1.35rem; font-weight: 400;
            line-height: 1.4; color: #e0e0e0; margin-bottom: 1.25rem;
        }

        .g-review-slide .quote-text::before { content: '\201C'; }
        .g-review-slide .quote-text::after  { content: '\201D'; }

        .g-review-slide .quote-attr {
            font-size: 0.8rem; font-weight: 400;
            color: rgba(255,255,255,0.5); letter-spacing: 0.02em;
        }

        .g-review-slide .quote-attr span { color: #e0e0e0; }

        .g-review-slide .quote-stars { display: flex; gap: 0.2rem; margin-bottom: 1rem; }
        .g-review-slide .quote-stars svg { width: 16px; height: 16px; fill: #e0e0e0; }

        .g-review-dots {
            position: absolute; bottom: 1.25rem; left: 3rem;
            display: flex; gap: 0.5rem; z-index: 2;
        }

        .g-review-dot {
            width: 7px; height: 7px; border-radius: 50%;
            background: rgba(255,255,255,0.2); cursor: pointer; transition: background 0.3s;
        }

        .g-review-dot.active { background: #e0e0e0; }

        /* Loading */
        .loading, .empty-state { text-align: center; padding: 6rem 2rem; grid-column: 1 / -1; }

        .spinner {
            width: 28px; height: 28px;
            border: 2px solid rgba(255,255,255,0.15); border-top-color: #e0e0e0;
            border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* =======================================
           CART SIDEBAR
           ======================================= */
        .cart-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.4); z-index: 1999;
            opacity: 0; visibility: hidden; transition: opacity 0.3s;
        }

        .cart-overlay.open { opacity: 1; visibility: visible; }

        .cart-sidebar {
            position: fixed; top: 0; right: -400px;
            width: 400px; height: 100vh;
            background: #111; color: #e0e0e0; z-index: 2000;
            transition: right 0.3s;
            display: flex; flex-direction: column;
            box-shadow: -4px 0 20px rgba(0,0,0,0.5);
        }

        .cart-sidebar.open { right: 0; }

        .cart-header {
            padding: 1.5rem 1.75rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: space-between; align-items: center;
        }

        .cart-header h2 {
            font-size: 0.9rem; font-weight: 500;
            letter-spacing: 0.1em; text-transform: uppercase;
            color: #e0e0e0;
        }

        .cart-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: rgba(255,255,255,0.6); }
        .cart-close:hover { color: #fff; }
        .cart-items { flex: 1; overflow-y: auto; padding: 1.5rem 1.75rem; }

        .cart-item {
            display: flex; gap: 1rem; padding: 1rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .cart-item:first-child { padding-top: 0; }
        .cart-item-image { width: 70px; height: 52px; object-fit: cover; border-radius: 2px; }
        .cart-item-info { flex: 1; }
        .cart-item-title { font-size: 0.85rem; font-weight: 400; margin-bottom: 0.2rem; color: #e0e0e0; }
        .cart-item-license { font-size: 0.75rem; color: rgba(255,255,255,0.45); font-weight: 300; }
        .cart-item-price { font-size: 0.85rem; font-weight: 500; margin-top: 0.25rem; color: #e0e0e0; }
        .cart-item-remove { background: none; border: none; color: rgba(255,255,255,0.4); cursor: pointer; font-size: 1.25rem; }
        .cart-item-remove:hover { color: #fff; }

        .cart-footer {
            padding: 1.5rem 1.75rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            background: #0a0a0a;
        }

        .cart-total {
            display: flex; justify-content: space-between;
            font-size: 1rem; font-weight: 500; margin-bottom: 1rem;
            color: #e0e0e0;
        }

        .checkout-btn {
            width: 100%; padding: 1rem;
            background: #fff; color: #0a0a0a; border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.8rem; font-weight: 400;
            letter-spacing: 0.12em; text-transform: uppercase; cursor: pointer;
        }

        .checkout-btn:hover:not(:disabled) { opacity: 0.8; }
        .checkout-btn:disabled { background: rgba(255,255,255,0.15); color: rgba(255,255,255,0.3); cursor: not-allowed; }

        /* =======================================
           FOOTER
           ======================================= */
        .footer {
            padding: 3rem 1.5rem;
            background: #0a0a0a;
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .footer-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-left {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.5);
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .footer-left a {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-left a:hover {
            color: rgba(255,255,255,0.8);
        }

        .footer-right {
            display: flex;
            gap: 2rem;
        }

        .footer-right a {
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.2s;
        }

        .footer-right a:hover {
            color: var(--white);
        }

        /* =======================================
           RESPONSIVE
           ======================================= */
        @media (max-width: 1100px) {
            .g-review-slideshow { grid-column: 1 / -1; grid-row: span 1; min-height: 220px; }
            .g-review-slide { padding: 2rem 2.5rem 2.5rem; }
            .g-review-dots { left: 2.5rem; }
        }

        @media (max-width: 750px) {
            .header-inner { padding: 1.25rem 0.75rem; }
            .unified-grid { grid-template-columns: repeat(2, 1fr); }
            .gallery-section { padding: 0 0.75rem 3rem; }
            .g-review-slideshow { min-height: 240px; }
            .g-review-slide { padding: 1.75rem 1.75rem 3rem; }
            .g-review-slide .quote-text { font-size: 1.1rem; }
            .g-review-dots { left: 1.75rem; bottom: 1.25rem; }
            .footer-inner { flex-direction: column; gap: 1rem; text-align: center; }
            .footer-left { flex-direction: column; gap: 0.5rem; }
        }

        @media (max-width: 500px) {
            .unified-grid { grid-template-columns: 1fr; gap: 6px; }
            .g-review-slideshow { grid-column: span 1; grid-row: span 1; }
            .g-overlay { padding: 2rem 0.75rem 0.75rem; }
            .g-title { font-size: 0.8rem; }
            .g-venue { font-size: 0.7rem; }
            .g-date { font-size: 0.65rem; }
            .g-count { font-size: 0.65rem; }
            .g-review-slideshow { min-height: 180px; }
            .g-review-slide { padding: 1.5rem 1.25rem 2rem; }
            .g-review-slide .quote-text { font-size: 1rem; }
            .g-review-dots { left: 1.25rem; bottom: 0.75rem; }
            .header-inner { padding: 1rem 0.75rem; }
            .nav { gap: 1.5rem; }
            .nav a { font-size: 0.75rem; }
            .tb-btn { padding: 0.7rem 1rem; font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="header-left">
                <button class="hamburger" onclick="openMobileMenu()" aria-label="Open menu">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
                <a href="/" class="logo">SF EVENT PHOTO</a>
            </div>
            <nav class="nav">
                <div class="nav-links">
                    <div class="nav-dropdown" id="aboutDropdown">
                        <button class="nav-dropdown-trigger" onclick="toggleNavDropdown('aboutDropdown')">
                            About
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div class="nav-dropdown-panel">
                            <a href="/about.html">Current</a>
                            <a href="/about-v1.html">V1 — Editorial</a>
                            <a href="/about-v2.html">V2 — Info Grid</a>
                            <a href="/about-v3.html">V3 — Cinematic</a>
                            <a href="/about-v4.html">V4 — Photo Hero</a>
                            <a href="/about-v5.html">V5 — Video + Grid</a>
                            <a href="/about-v6.html">V6 — Magazine</a>
                        </div>
                    </div>
                    <div class="nav-dropdown" id="servicesDropdown">
                        <button class="nav-dropdown-trigger" onclick="toggleNavDropdown('servicesDropdown')">
                            Services
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div class="nav-dropdown-panel">
                            <a href="/services.html">Current</a>
                            <a href="/services-v1.html">V1 — Accordion</a>
                            <a href="/services-v2.html">V2 — Grid</a>
                            <a href="/services-v3.html">V3 — Full-Width</a>
                            <a href="/services-v4.html">V4 — Image Pairs</a>
                            <a href="/services-v5.html">V5 — Video + Cards</a>
                            <a href="/services-v6.html">V6 — Parallax</a>
                        </div>
                    </div>
                    <a href="/contact.html">Contact</a>
                </div>
                <div class="nav-actions">
                    <a href="/signin.html" class="auth-link" id="signInLink">Sign In</a>
                    <div class="user-menu" id="userMenu" style="display: none;">
                        <button class="user-menu-btn" onclick="toggleUserMenu()">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                            <span id="userName">Account</span>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="/my-photos.html">My Photos</a>
                            <button class="signout-btn" onclick="signOut()">
                                Sign Out
                                <div class="user-email" id="userEmail"></div>
                            </button>
                        </div>
                    </div>
                    <a href="#" class="cart-link" onclick="toggleCart(); return false;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        <span class="cart-badge" id="cartCount">0</span>
                    </a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <a href="/" class="logo">SF EVENT PHOTO</a>
            <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close menu">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <nav class="mobile-menu-links">
            <a href="/">Home</a>
            <a href="/about.html">About</a>
            <a href="/services.html">Services</a>
            <a href="/contact.html">Contact</a>
        </nav>
    </div>

    <!-- Video Hero - Full Viewport -->
    <section class="video-hero">
        <video class="video-hero-bg" autoplay muted loop playsinline poster="">
            <source src="./videos/HomePage-BannerVideo_LA.mp4" type="video/mp4">
        </video>
        <div class="video-hero-overlay"></div>
        <div class="video-hero-content">
            <p class="video-hero-slogan" id="heroSlogan">San Francisco's Premier Event Photography Agency.<br><span class="video-hero-subtitle">Photographer owned and operated.</span></p>
            <h1 class="video-hero-headline" id="heroHeadline">SF Event Photo</h1>
        </div>
        <div class="scroll-indicator">
            <span>Scroll</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7-7-7"/>
            </svg>
        </div>
    </section>

    <!-- Spacer: holds scroll height so fixed video stays visible -->
    <div class="hero-spacer"></div>

    <!-- Main content: scrolls over the fixed video -->
    <div class="main-content">

    <!-- Tag Strip - Sticky below header -->
    <div class="tag-strip">
        <!-- Search (far left) -->
        <div class="tag-strip-left">
            <button class="tag-strip-search-toggle" id="searchToggleBtn" onclick="toggleInlineSearch()" aria-label="Search">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" width="15" height="15"><circle cx="11" cy="11" r="8"/><path stroke-linecap="round" d="m21 21-4.35-4.35"/></svg>
                <span class="search-cursor"></span>
            </button>
            <div class="tag-strip-inline-search" id="inlineSearchWrap" style="display:none;">
                <input type="text" class="tag-strip-inline-input" id="inlineSearchInput" placeholder="Search people, brands, or events...">
                <button class="tag-strip-inline-close" onclick="toggleInlineSearch()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="14" height="14"><path stroke-linecap="round" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
            </div>
        </div>

        <!-- Center: Category pill tags (desktop) / Event Type dropdown (mobile) -->
        <div class="tag-strip-center">
            <!-- Desktop: Pill tags -->
            <div class="tag-pills tag-pills-desktop">
                <button class="tag-pill active" onclick="selectTag('all', this)">All</button>
                <button class="tag-pill" onclick="selectTag('activation', this)">Activations</button>
                <button class="tag-pill" onclick="selectTag('conference', this)">Conferences</button>
                <button class="tag-pill tag-p3" onclick="selectTag('video', this)">Video</button>
                <button class="tag-pill tag-p2" onclick="selectTag('corporate', this)">Corporate</button>
                <button class="tag-pill tag-p1" onclick="selectTag('portraits', this)">Portraits</button>
                <button class="tag-pill tag-p1" onclick="selectTag('party', this)">Party</button>
            </div>

            <!-- More dropdown (appears as tags collapse) -->
            <div class="tb-dropdown ts-more-wrap" id="moreDropdownWrap">
                <button class="tag-pill ts-more-btn" onclick="toggleMoreDropdown()">
                    More
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width:10px;height:10px;stroke-width:2.5;margin-left:4px;vertical-align:middle;"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                </button>
                <div class="tb-panel ts-more-panel" id="morePanel">
                    <button class="tb-option ts-more-option" data-cat="video" onclick="selectCategoryFromMore('video', this)">Video</button>
                    <button class="tb-option ts-more-option" data-cat="corporate" onclick="selectCategoryFromMore('corporate', this)">Corporate</button>
                    <button class="tb-option ts-more-option" data-cat="portraits" onclick="selectCategoryFromMore('portraits', this)">Portraits</button>
                    <button class="tb-option ts-more-option" data-cat="party" onclick="selectCategoryFromMore('party', this)">Party</button>
                </div>
            </div>

            <!-- Mobile: Event Type dropdown -->
            <div class="tb-dropdown tag-strip-mobile-dropdown" id="eventTypeDropdownWrap">
                <button class="tb-btn" id="eventTypeBtn" onclick="toggleDropdown('eventType')">
                    <span id="eventTypeLabel">Event Type</span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="tb-panel" id="eventTypePanel">
                    <button class="tb-option active" onclick="selectEventType('all', 'All')">All</button>
                    <button class="tb-option" onclick="selectEventType('activation', 'Activations')">Activations</button>
                    <button class="tb-option" onclick="selectEventType('conference', 'Conferences')">Conferences</button>
                    <button class="tb-option" onclick="selectEventType('video', 'Video')">Video</button>
                    <button class="tb-option" onclick="selectEventType('corporate', 'Corporate')">Corporate</button>
                    <button class="tb-option" onclick="selectEventType('portraits', 'Portraits')">Portraits</button>
                    <button class="tb-option" onclick="selectEventType('party', 'Party')">Party</button>
                </div>
            </div>
        </div>

        <!-- Toolbar Search (visible only in press feed mode) -->
        <div class="tag-strip-search">
            <div class="tag-strip-search-container">
                <input type="text" class="tag-strip-search-input" id="tbSearchInput" placeholder="Search people, brands, or events">
                <button class="tag-strip-search-btn" onclick="doToolbarSearch()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="11" cy="11" r="8"/><path stroke-linecap="round" d="m21 21-4.35-4.35"/></svg>
                </button>
            </div>
        </div>

        <!-- Press Feed toggle (far right) -->
        <div class="tag-strip-right">
            <button class="press-feed-btn" id="pressFeedBtn" onclick="togglePressFeed()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" width="14" height="14">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z"/>
                </svg>
                Press Feed
            </button>
        </div>
    </div>

    <!-- Gallery Grid -->
    <section class="gallery-section">
        <div class="unified-grid" id="unifiedGrid">
            <div class="loading"><div class="spinner"></div></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-inner">
            <div class="footer-left">
                <span>&copy; 2026 SF Event Photo</span>
                <a href="/privacy.html">Privacy Policy</a>
            </div>
            <div class="footer-right">
                <a href="mailto:bookings@sfeventphoto.com">Email</a>
                <a href="https://instagram.com/sfeventphoto" target="_blank">Instagram</a>
                <a href="https://linkedin.com/company/sfeventphoto" target="_blank">LinkedIn</a>
            </div>
        </div>
    </footer>

    </div><!-- /.main-content -->

    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Cart</h2>
            <button class="cart-close" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-state"><p>Your cart is empty</p></div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn" disabled onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <script>
        const API_URL = 'https://sf-event-photo-backend.vercel.app';
        let projects = [];
        let currentFilter = 'all';
        let currentSort = 'featured';
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');

        const reviews = [
            { quote: "I manage corporate events across 7 states and this is by far my favorite photography team. They are quick to respond, adaptable, and deliver on timelines.", name: "Michelle H", company: "Lockton" },
            { quote: "The experience was amazing from the first time we spoke. Every moment and detail was perfectly captured with great quality.", name: "Lucia M", company: "MarketLogic" },
            { quote: "A top professional from start to finish. Full of positive energy during the event and the final photos were stunning.", name: "Maude P", company: "BlockChain Game Alliance" },
            { quote: "We hired SF Event Photo for our corporate event and couldn't be happier. The photos are absolutely stunning.", name: "Yajaira C", company: "StarSpace Global" },
            { quote: "The attention to detail and creativity truly set them apart. We highly recommend SF Event Photo.", name: "Lauren R", company: "Transforming Age" },
            { quote: "I hired SF Event Photo for my company's biggest events and they did a fantastic job! Completely professional.", name: "Garnette R", company: "BXP" }
        ];

        const starSVG = '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';

        /* -- Nav Dropdowns -- */
        function toggleNavDropdown(id) {
            const dropdown = document.getElementById(id);
            const isOpen = dropdown.classList.contains('open');
            document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            if (!isOpen) dropdown.classList.add('open');
        }

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            }
        });

        /* -- Mobile Menu -- */
        function openMobileMenu() {
            document.getElementById('mobileMenu').classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            document.getElementById('mobileMenu').classList.remove('open');
            document.body.style.overflow = '';
        }

        /* -- Auth -- */
        function checkAuth() {
            const u = localStorage.getItem('user');
            if (u) {
                const user = JSON.parse(u);
                document.getElementById('signInLink').style.display = 'none';
                document.getElementById('userMenu').style.display = 'block';
                document.getElementById('userName').textContent = user.name.split(' ')[0];
                document.getElementById('userEmail').textContent = user.email;
            }
        }

        function toggleUserMenu() { document.getElementById('userDropdown').classList.toggle('show'); }

        document.addEventListener('click', e => {
            if (!e.target.closest('.user-menu')) document.getElementById('userDropdown')?.classList.remove('show');
        });

        function signOut() { localStorage.removeItem('user'); localStorage.removeItem('token'); location.reload(); }

        /* -- Cart -- */
        function toggleCart() {
            document.getElementById('cartSidebar').classList.toggle('open');
            document.getElementById('cartOverlay').classList.toggle('open');
        }

        function updateCartUI() {
            const items = document.getElementById('cartItems');
            const count = document.getElementById('cartCount');
            const total = document.getElementById('cartTotal');
            const btn = document.getElementById('checkoutBtn');
            count.textContent = cart.length;
            count.classList.toggle('show', cart.length > 0);
            if (!cart.length) {
                items.innerHTML = '<div class="empty-state"><p>Your cart is empty</p></div>';
                total.textContent = '$0.00'; btn.disabled = true; return;
            }
            let sum = 0;
            items.innerHTML = cart.map((it, i) => {
                sum += it.price;
                return `<div class="cart-item"><img src="${it.thumbnail}" class="cart-item-image"><div class="cart-item-info"><div class="cart-item-title">${it.title}</div><div class="cart-item-license">${it.license} License</div><div class="cart-item-price">$${(it.price/100).toFixed(2)}</div></div><button class="cart-item-remove" onclick="removeFromCart(${i})">&times;</button></div>`;
            }).join('');
            total.textContent = `$${(sum/100).toFixed(2)}`; btn.disabled = false;
        }

        function removeFromCart(i) { cart.splice(i,1); localStorage.setItem('cart',JSON.stringify(cart)); updateCartUI(); }

        /* -- Search -- */
        function doHeroSearch() {
            const q = document.getElementById('heroSearchInput').value.trim();
            if (q) location.href = `/search.html?q=${encodeURIComponent(q)}`;
        }

        function doToolbarSearch() {
            const q = document.getElementById('tbSearchInput').value.trim();
            if (q) location.href = `/search.html?q=${encodeURIComponent(q)}`;
        }

        /* -- Toolbar Dropdowns -- */
        function toggleDropdown(which) {
            const panels = {
                sort: { panel: 'sortPanel', btn: 'sortBtn' },
                eventType: { panel: 'eventTypePanel', btn: 'eventTypeBtn' }
            };

            Object.keys(panels).forEach(key => {
                if (key !== which) {
                    document.getElementById(panels[key].panel)?.classList.remove('show');
                    document.getElementById(panels[key].btn)?.classList.remove('open');
                }
            });

            const panel = document.getElementById(panels[which].panel);
            const btn = document.getElementById(panels[which].btn);
            panel?.classList.toggle('show');
            btn?.classList.toggle('open');
        }

        document.addEventListener('click', e => {
            if (!e.target.closest('.tb-dropdown') && !e.target.closest('.ts-more-wrap')) {
                document.querySelectorAll('.tb-panel').forEach(p => p.classList.remove('show'));
                document.querySelectorAll('.tb-btn').forEach(b => b.classList.remove('open'));
            }
        });

        /* -- Category Tag Selection -- */
        function selectTag(val, btn) {
            currentFilter = val;
            document.querySelectorAll('.tag-pill').forEach(pill => pill.classList.remove('active'));
            btn.classList.add('active');
            document.querySelector('.ts-more-btn')?.classList.remove('active');
            syncEventTypeDropdown(val);
            renderGallery();
        }

        function selectEventType(val, label) {
            currentFilter = val;
            document.getElementById('eventTypeLabel').textContent = label;
            document.querySelectorAll('#eventTypePanel .tb-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim() === label);
            });
            document.getElementById('eventTypePanel').classList.remove('show');
            document.getElementById('eventTypeBtn').classList.remove('open');
            // Sync desktop pills
            document.querySelectorAll('.tag-pill').forEach(pill => pill.classList.remove('active'));
            document.querySelectorAll('.tag-pill').forEach(pill => {
                if (pill.textContent.trim().toLowerCase() === label.toLowerCase() ||
                    (val === 'all' && pill.textContent.trim() === 'All')) {
                    pill.classList.add('active');
                }
            });
            renderGallery();
        }

        /* -- More Dropdown (progressive collapse) -- */
        function toggleMoreDropdown() {
            const panel = document.getElementById('morePanel');
            panel.classList.toggle('show');
        }

        function selectCategoryFromMore(val, btn) {
            currentFilter = val;
            // Close More panel
            document.getElementById('morePanel').classList.remove('show');
            // Clear all pill actives
            document.querySelectorAll('.tag-pill').forEach(p => p.classList.remove('active'));
            // Mark the More button as active
            document.querySelector('.ts-more-btn')?.classList.add('active');
            syncEventTypeDropdown(val);
            renderGallery();
        }

        function syncEventTypeDropdown(val) {
            const options = document.querySelectorAll('#eventTypePanel .tb-option');
            options.forEach(o => {
                const isActive = o.textContent.trim().toLowerCase().includes(val) ||
                                 (val === 'all' && o.textContent.trim() === 'All');
                o.classList.toggle('active', isActive);
                if (isActive) {
                    document.getElementById('eventTypeLabel').textContent = o.textContent.trim();
                }
            });
        }

        function selectSort(val, label) {
            currentSort = val;
            document.getElementById('sortLabel').textContent = label;
            document.querySelectorAll('#sortPanel .tb-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim().toLowerCase() === val);
            });
            document.getElementById('sortPanel').classList.remove('show');
            document.getElementById('sortBtn').classList.remove('open');
            deactivatePressFeed();
            renderGallery();
        }

        /* -- Press Feed -- */
        let pressFeedActive = false;

        function activatePressFeed() {
            pressFeedActive = true;
            document.body.classList.add('press-feed-active');
            document.getElementById('pressFeedBtn')?.classList.add('active');
            currentSort = 'newest';
            currentFilter = 'all';
            document.getElementById('sortLabel').textContent = 'Newest';
            document.querySelectorAll('#sortPanel .tb-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim() === 'Newest');
            });
            document.querySelectorAll('.tag-pill').forEach(pill => pill.classList.remove('active'));
            document.querySelectorAll('.tag-pill').forEach(pill => {
                if (pill.textContent.trim() === 'All') pill.classList.add('active');
            });
            syncEventTypeDropdown('all');
            renderGallery();
            // Scroll to top so user sees the feed from the beginning
            window.scrollTo({ top: 0, behavior: 'instant' });
            document.getElementById('tbSearchInput')?.focus();
        }

        function deactivatePressFeed() {
            pressFeedActive = false;
            document.body.classList.remove('press-feed-active');
            document.getElementById('pressFeedBtn')?.classList.remove('active');
            document.getElementById('tbSearchInput').value = '';
            // Re-evaluate scrolled state after hero spacer is restored
            requestAnimationFrame(() => {
                const headerH = parseFloat(getComputedStyle(document.documentElement)
                    .getPropertyValue('--header-h')) || 56;
                const ts = document.querySelector('.tag-strip');
                const tsTop = ts ? ts.getBoundingClientRect().top : 999;
                document.body.classList.toggle('scrolled', tsTop <= headerH + 2);
            });
        }

        function togglePressFeed() {
            if (pressFeedActive) {
                deactivatePressFeed();
                selectSort('featured', 'Featured');
            } else {
                activatePressFeed();
            }
        }

        /* -- Helpers -- */
        function formatDateRange(s, e) {
            if (!s) return '';
            const d = new Date(s), sm = d.toLocaleDateString('en-US',{month:'short'}), sd = d.getDate(), sy = d.getFullYear();
            if (!e) return `${sm} ${sd}, ${sy}`;
            const d2 = new Date(e), em = d2.toLocaleDateString('en-US',{month:'short'}), ed = d2.getDate(), ey = d2.getFullYear();
            if (sm===em && sy===ey) return `${sm} ${sd}-${ed}, ${sy}`;
            if (sy===ey) return `${sm} ${sd} - ${em} ${ed}, ${sy}`;
            return `${sm} ${sd}, ${sy} - ${em} ${ed}, ${ey}`;
        }

        function viewProject(slug) { location.href = `/project.html?slug=${slug}`; }

        /* -- Tiles -- */
        const lockIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg>`;
        const photoIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/></svg>`;

        function tile(p) {
            const tag = Array.isArray(p.tags) && p.tags.length ? p.tags[0] : (p.event_type || '');
            const tagDisplay = Array.isArray(p.tags) && p.tags.length ? p.tags.join(' \u00b7 ') : (p.event_type || '');
            const topLine = currentSort === 'featured'
                ? tagDisplay
                : formatDateRange(p.event_date, p.event_end_date);
            const dateStr = formatDateRange(p.event_date, p.event_end_date);
            const isPrivate = p.is_private === true;
            return `<div class="g-project ${isPrivate ? 'g-project-private' : ''}" onclick="viewProject('${p.slug}')">
                <img src="${p.cover_image_url||'https://via.placeholder.com/600x450'}" alt="${p.title}" loading="lazy">
                ${isPrivate ? `<div class="g-private-overlay"><div class="g-lock-icon">${lockIcon}</div></div>` : ''}
                <div class="g-overlay">
                    ${topLine ? `<div class="g-date">${topLine}</div>` : ''}
                    <div class="g-title">${p.title}</div>
                    ${p.venue?`<div class="g-venue">${p.venue}</div>`:''}
                    <div class="g-count">${photoIcon} ${p.photo_count||0}</div>
                </div>
            </div>`;
        }

        function reviewSlideshowTile() {
            const slides = reviews.map((r,i) =>
                `<div class="g-review-slide ${i===0?'active':''}" data-slide="${i}">
                    <div class="quote-stars">${starSVG.repeat(5)}</div>
                    <p class="quote-text">${r.quote}</p>
                    <div class="quote-attr"><span>${r.name}</span> — ${r.company}</div>
                </div>`
            ).join('');
            const dots = reviews.map((_,i) =>
                `<div class="g-review-dot ${i===0?'active':''}" onclick="goToReview(${i})"></div>`
            ).join('');
            return `<div class="g-review-slideshow" id="reviewSlideshow">${slides}<div class="g-review-dots">${dots}</div></div>`;
        }

        /* -- Review Slideshow -- */
        let currentReview = 0, reviewInterval;

        function goToReview(idx) {
            const c = document.getElementById('reviewSlideshow');
            if (!c) return;
            const slides = c.querySelectorAll('.g-review-slide');
            const dots = c.querySelectorAll('.g-review-dot');
            slides[currentReview].classList.remove('active');
            dots[currentReview].classList.remove('active');
            currentReview = idx;
            slides[currentReview].classList.add('active');
            dots[currentReview].classList.add('active');
            clearInterval(reviewInterval);
            reviewInterval = setInterval(() => goToReview((currentReview+1)%reviews.length), 5000);
        }

        function startReviewSlideshow() {
            currentReview = 0;
            clearInterval(reviewInterval);
            reviewInterval = setInterval(() => goToReview((currentReview+1)%reviews.length), 5000);
        }

        /* -- Sort helpers -- */
        function sortProjects(list) {
            if (currentSort === 'newest') {
                return [...list].sort((a,b) => {
                    const da = a.event_date ? new Date(a.event_date) : new Date(0);
                    const db = b.event_date ? new Date(b.event_date) : new Date(0);
                    return db - da;
                });
            }
            if (currentSort === 'oldest') {
                return [...list].sort((a,b) => {
                    const da = a.event_date ? new Date(a.event_date) : new Date(0);
                    const db = b.event_date ? new Date(b.event_date) : new Date(0);
                    return da - db;
                });
            }
            return [...list].sort((a,b) => {
                if (a.featured && !b.featured) return -1;
                if (!a.featured && b.featured) return 1;
                if (a.featured && b.featured) {
                    return (a.featured_order || 0) - (b.featured_order || 0);
                }
                const da = a.event_date ? new Date(a.event_date) : new Date(0);
                const db = b.event_date ? new Date(b.event_date) : new Date(0);
                return db - da;
            });
        }

        /* -- Gallery Render -- */
        function renderGallery() {
            const grid = document.getElementById('unifiedGrid');
            let filtered = projects;

            if (currentFilter !== 'all') {
                filtered = projects.filter(p => {
                    const tags = (Array.isArray(p.tags) ? p.tags : []).map(t => t.toLowerCase());
                    const et = (p.event_type || '').toLowerCase();
                    return tags.includes(currentFilter) || et === currentFilter;
                });
            }
            filtered = sortProjects(filtered);

            /* Preserve scroll position & scrolled-mode colors across innerHTML swap. */
            const wasScrolled = document.body.classList.contains('scrolled');
            grid.style.minHeight = '';

            if (!filtered.length) {
                grid.innerHTML = '<div class="empty-state"><p>No projects found.</p></div>';
                if (wasScrolled) document.body.classList.add('scrolled');
                return;
            }

            let html = '', pi = 0;
            const wall = Math.min(10, filtered.length);
            for (let i = 0; i < wall; i++) html += tile(filtered[pi++]);

            if (filtered.length > 6) {
                html += reviewSlideshowTile();
                for (let i = 0; i < 6 && pi < filtered.length; i++) html += tile(filtered[pi++]);
            }

            while (pi < filtered.length) html += tile(filtered[pi++]);
            grid.innerHTML = html;
            if (wasScrolled) document.body.classList.add('scrolled');
            startReviewSlideshow();
        }

        /* -- Load -- */
        async function loadProjects() {
            try {
                const res = await fetch(`${API_URL}/api/projects`);
                const data = await res.json();
                if (data.error) throw new Error(data.error);
                projects = (data.projects||[]).sort((a,b) => (a.sort_order||0) - (b.sort_order||0));
                renderGallery();
            } catch(e) {
                document.getElementById('unifiedGrid').innerHTML = `<div class="empty-state"><h3>Error</h3><p>${e.message}</p></div>`;
            }
        }

        /* -- Checkout -- */
        async function checkout() {
            const token = localStorage.getItem('token');
            if (!token) { location.href = '/signin.html'; return; }
            const btn = document.getElementById('checkoutBtn');
            btn.disabled = true; btn.textContent = 'Processing...';
            try {
                const res = await fetch(`${API_URL}/api/checkout`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },
                    body: JSON.stringify({ items: cart })
                });
                const data = await res.json();
                if (data.url) window.location.href = data.url;
                else throw new Error(data.error || 'Checkout failed');
            } catch(e) {
                alert('Checkout error: ' + e.message);
                btn.disabled = false; btn.textContent = 'Proceed to Checkout';
            }
        }

        /* ── Hero Crossfade: wheel-driven, then normal scroll ── */
        function initHeroScroll() {
            const headline = document.getElementById('heroHeadline');
            const slogan = document.getElementById('heroSlogan');
            const scrollIndicator = document.querySelector('.scroll-indicator');
            const heroSpacer = document.querySelector('.hero-spacer');
            const tagStrip = document.querySelector('.tag-strip');

            if (!headline) return;

            // Mobile: skip crossfade, allow immediate scrolling
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            if (isMobile) {
                if (slogan) slogan.style.opacity = '1';
                headline.style.opacity = '0';
                /* Keep scroll indicator visible on mobile */
                // Still need the scrolled-class listener
                window.addEventListener('scroll', function() {
                    const headerH = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--header-h')) || 56;
                    const tagStripTop = tagStrip ? tagStrip.getBoundingClientRect().top : 999;
                    document.body.classList.toggle('scrolled', tagStripTop <= headerH + 2);
                }, { passive: true });
                return;
            }

            let targetProgress = 0;      // where we want to be (0–1)
            let displayProgress = 0;     // smoothly animated current value
            let crossfadeDone = false;
            let animFrame = null;
            const WHEEL_SENSITIVITY = 0.0015; // slower crossfade
            const TOUCH_SENSITIVITY = 0.003;
            const EASE_SPEED = 0.08;          // lerp factor for smoothing

            // Lock page scroll at start
            document.body.classList.add('hero-locked');
            window.scrollTo(0, 0);

            function renderCrossfade(p) {
                // Slogan: fades out 0–60% with gentle drift
                if (slogan) {
                    const sloganP = Math.min(p / 0.6, 1);
                    slogan.style.opacity = 1 - sloganP;
                    slogan.style.transform = `translate(-50%, calc(-50% + ${-sloganP * 25}px))`;
                }

                // Headline: fades in 35–85%
                const hlStart = 0.35;
                const hlEnd = 0.85;
                let hlOpacity = 0;
                if (p < hlStart) {
                    hlOpacity = 0;
                } else if (p < hlEnd) {
                    hlOpacity = (p - hlStart) / (hlEnd - hlStart);
                } else {
                    hlOpacity = 1;
                }
                headline.style.opacity = hlOpacity;

                // Scroll indicator
                if (scrollIndicator) {
                    const indicatorP = Math.min(p / 0.25, 1);
                    scrollIndicator.style.opacity = (1 - indicatorP) * 0.6;
                }
            }

            // Smooth animation loop — lerps displayProgress toward targetProgress
            function animateCrossfade() {
                displayProgress += (targetProgress - displayProgress) * EASE_SPEED;

                // Snap when close enough
                if (Math.abs(displayProgress - targetProgress) < 0.002) {
                    displayProgress = targetProgress;
                }

                renderCrossfade(displayProgress);

                // Check if crossfade completed
                if (displayProgress >= 0.99 && targetProgress >= 1) {
                    displayProgress = 1;
                    renderCrossfade(1);
                    crossfadeDone = true;
                    document.body.classList.remove('hero-locked');
                    animFrame = null;
                    return;
                }

                // Keep animating if not settled
                if (Math.abs(displayProgress - targetProgress) > 0.001) {
                    animFrame = requestAnimationFrame(animateCrossfade);
                } else {
                    animFrame = null;
                }
            }

            function startAnimation() {
                if (!animFrame) {
                    animFrame = requestAnimationFrame(animateCrossfade);
                }
            }

            // Re-lock scroll and reverse crossfade when user scrolls back to top
            function reLockForReverse() {
                crossfadeDone = false;
                document.body.classList.add('hero-locked');
                window.scrollTo(0, 0);
                // targetProgress and displayProgress are already at 1
                // They'll be driven back down by the wheel handler
            }

            function onWheel(e) {
                // If crossfade is done and user scrolls back to top, re-lock
                if (crossfadeDone) {
                    const scrollY = window.pageYOffset || window.scrollY;
                    if (e.deltaY < 0 && scrollY <= 0) {
                        reLockForReverse();
                        e.preventDefault();
                        targetProgress = Math.max(targetProgress - 0.05, 0);
                        startAnimation();
                    }
                    return;
                }

                e.preventDefault();

                if (e.deltaY > 0) {
                    targetProgress = Math.min(targetProgress + e.deltaY * WHEEL_SENSITIVITY, 1);
                } else if (e.deltaY < 0) {
                    targetProgress = Math.max(targetProgress + e.deltaY * WHEEL_SENSITIVITY, 0);
                }

                startAnimation();
            }

            window.addEventListener('wheel', onWheel, { passive: false });

            // Touch support for mobile
            let touchStartY = 0;
            function onTouchStart(e) {
                touchStartY = e.touches[0].clientY;
            }
            function onTouchMove(e) {
                if (crossfadeDone) {
                    const scrollY = window.pageYOffset || window.scrollY;
                    const deltaY = touchStartY - e.touches[0].clientY;
                    if (deltaY < 0 && scrollY <= 0) {
                        reLockForReverse();
                        e.preventDefault();
                        targetProgress = Math.max(targetProgress - 0.05, 0);
                        startAnimation();
                    }
                    touchStartY = e.touches[0].clientY;
                    return;
                }

                const deltaY = touchStartY - e.touches[0].clientY;
                if (deltaY > 0 || targetProgress > 0) {
                    e.preventDefault();
                    targetProgress = Math.min(Math.max(targetProgress + deltaY * TOUCH_SENSITIVITY, 0), 1);
                    touchStartY = e.touches[0].clientY;
                    startAnimation();
                }
            }
            window.addEventListener('touchstart', onTouchStart, { passive: false });
            window.addEventListener('touchmove', onTouchMove, { passive: false });

            // Toggle scrolled class when tag strip actually touches the header
            window.addEventListener('scroll', function() {
                if (!crossfadeDone) return;
                const headerH = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--header-h')) || 56;
                const tagStripTop = tagStrip ? tagStrip.getBoundingClientRect().top : 999;
                document.body.classList.toggle('scrolled', tagStripTop <= headerH + 2);
            }, { passive: true });

            renderCrossfade(0);
        }

        /* ── Inline Search Toggle ── */
        function toggleInlineSearch() {
            const wrap = document.getElementById('inlineSearchWrap');
            const btn = document.getElementById('searchToggleBtn');
            const input = document.getElementById('inlineSearchInput');
            const isOpen = wrap.style.display !== 'none';

            if (isOpen) {
                wrap.style.display = 'none';
                btn.style.visibility = 'visible';
                btn.style.pointerEvents = '';
            } else {
                wrap.style.display = 'flex';
                btn.style.visibility = 'hidden';
                btn.style.pointerEvents = 'none';
                input.focus();
            }
        }

        function doInlineSearch() {
            const q = document.getElementById('inlineSearchInput').value.trim();
            if (q) location.href = `/search.html?q=${encodeURIComponent(q)}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            checkAuth(); updateCartUI(); loadProjects(); initHeroScroll();
            document.getElementById('inlineSearchInput').addEventListener('keydown', e => { if (e.key==='Enter') doInlineSearch(); });
            document.getElementById('tbSearchInput').addEventListener('keydown', e => { if (e.key==='Enter') doToolbarSearch(); });

            // Measure header height for sticky tag strip offset
            const header = document.querySelector('.header');
            function setHeaderHeight() {
                document.documentElement.style.setProperty('--header-h', header.offsetHeight + 'px');
            }
            setHeaderHeight();
            window.addEventListener('resize', setHeaderHeight);

            // Ensure video plays and loops
            const vid = document.querySelector('.video-hero-bg');
            if (vid) {
                vid.loop = true;
                vid.muted = true;
                vid.play().catch(() => {});
            }
        });
    </script>
</body>
</html>
