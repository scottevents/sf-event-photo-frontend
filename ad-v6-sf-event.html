<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Francisco Event Photographers — SF Event Photo</title>

    <meta name="description" content="SF Event Photo is a premier event photography agency serving San Francisco and Los Angeles. Corporate events, brand activations, conferences, and more.">
    <link rel="preconnect" href="https://imagedelivery.net" crossorigin>

    <style>
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalLight.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalLight.woff') format('woff');
            font-weight: 300; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalRegular.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalRegular.woff') format('woff');
            font-weight: 400; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalMedium.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalMedium.woff') format('woff');
            font-weight: 500; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'PP Neue York';
            src: url('./fonts/PPNeueYork-NormalBlack.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-NormalBlack.woff') format('woff');
            font-weight: 900; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'PP Neue York Condensed';
            src: url('./fonts/PPNeueYork-CondensedBlack.woff2') format('woff2'),
                 url('./fonts/PPNeueYork-CondensedBlack.woff') format('woff');
            font-weight: 900; font-style: normal; font-display: swap;
        }

        :root {
            --black: #1a1a1a;
            --white: #ffffff;
            --gray-light: #f8f8f8;
            --gray-mid: #e8e8e8;
            --gray-dark: #888888;
            --gap: 8px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'PP Neue York', Georgia, serif;
            color: #d4d4d4;
            background: #0a0a0a;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* ═══════════════════════════════════════
           HEADER
           ═══════════════════════════════════════ */
        .header {
            position: sticky; top: 0;
            background: #0a0a0a; z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .header-inner {
            display: flex; justify-content: space-between;
            align-items: center; padding: 1.25rem 1.5rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
        }

        .hamburger svg {
            width: 24px;
            height: 24px;
            stroke: #d4d4d4;
            stroke-width: 1.5;
        }

        .logo {
            font-size: 0.9rem; font-weight: 400;
            letter-spacing: 0.08em; text-decoration: none; color: #d4d4d4;
        }

        .nav { display: flex; gap: 2.5rem; align-items: center; }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            align-items: center;
        }

        .nav a {
            text-decoration: none; color: #d4d4d4;
            font-size: 0.85rem; font-weight: 400;
            letter-spacing: 0.1em; text-transform: uppercase;
            transition: opacity 0.2s;
        }

        .nav a:hover { opacity: 0.5; }

        /* Nav Dropdowns */
        .nav-dropdown {
            position: relative;
        }

        .nav-dropdown-trigger {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            text-decoration: none;
            color: #d4d4d4;
            font-size: 0.85rem;
            font-weight: 400;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            transition: opacity 0.2s;
            cursor: pointer;
            background: none;
            border: none;
            font-family: inherit;
            padding: 0;
        }

        .nav-dropdown-trigger:hover { opacity: 0.5; }

        .nav-dropdown-trigger svg {
            width: 8px;
            height: 8px;
            stroke: #d4d4d4;
            stroke-width: 2.5;
            transition: transform 0.2s;
        }

        .nav-dropdown.open .nav-dropdown-trigger svg {
            transform: rotate(180deg);
        }

        .nav-dropdown-panel {
            display: none;
            position: absolute;
            top: calc(100% + 12px);
            left: 0;
            min-width: 180px;
            background: #1a1a1a;
            border: 1px solid rgba(255,255,255,0.12);
            z-index: 100;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
        }

        .nav-dropdown.open .nav-dropdown-panel {
            display: block;
        }

        .nav-dropdown-panel a {
            display: block;
            padding: 0.7rem 1rem;
            font-size: 0.8rem;
            font-weight: 400;
            letter-spacing: 0.05em;
            text-transform: none;
            color: rgba(255,255,255,0.6);
            text-decoration: none;
            transition: all 0.15s;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .nav-dropdown-panel a:last-child { border-bottom: none; }

        .nav-dropdown-panel a:hover {
            color: #fff;
            background: rgba(255,255,255,0.05);
            opacity: 1;
        }

        .nav-actions {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .cart-link { position: relative; display: flex; align-items: center; text-decoration: none; }
        .cart-link svg { width: 24px; height: 24px; stroke-width: 1.5; }

        .cart-badge {
            position: absolute; top: -6px; right: -10px;
            background: #e53935; color: white;
            font-size: 0.65rem; font-weight: 500;
            min-width: 18px; height: 18px; border-radius: 50%;
            display: none; align-items: center; justify-content: center;
        }

        .cart-badge.show { display: flex; }

        .auth-link {
            text-decoration: none; color: #d4d4d4;
            font-size: 0.85rem; font-weight: 400;
            letter-spacing: 0.1em; text-transform: uppercase; transition: opacity 0.2s;
        }

        .auth-link:hover { opacity: 0.5; }

        /* Mobile menu overlay */
        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--white);
            z-index: 2000;
            flex-direction: column;
            padding: 1.5rem;
        }

        .mobile-menu.open {
            display: flex;
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
        }

        .mobile-menu-close svg {
            width: 28px;
            height: 28px;
            stroke: var(--black);
            stroke-width: 1.5;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .mobile-menu-links a {
            display: block;
            padding: 1.25rem 0;
            text-decoration: none;
            color: var(--black);
            font-size: 1.25rem;
            font-weight: 400;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--gray-mid);
        }

        .mobile-menu-links a:first-child {
            border-top: 1px solid var(--gray-mid);
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            .nav-links {
                display: none;
            }
            .nav {
                gap: 1.5rem;
            }
            .nav-actions {
                gap: 1.25rem;
            }
            .auth-link {
                font-size: 0.75rem;
            }
        }

        /* User Menu */
        .user-menu { position: relative; }

        .user-menu-btn {
            background: none; border: none; cursor: pointer;
            display: flex; align-items: center; gap: 0.4rem;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem; font-weight: 400;
            letter-spacing: 0.1em; text-transform: uppercase;
            color: #d4d4d4; padding: 0; transition: opacity 0.2s;
        }

        .user-menu-btn:hover { opacity: 0.5; }
        .user-menu-btn svg { width: 20px; height: 20px; stroke-width: 1.5; }

        .user-dropdown {
            position: absolute; top: calc(100% + 10px); right: 0;
            background: var(--white); border: 1px solid var(--gray-mid);
            min-width: 200px; display: none; z-index: 100;
        }

        .user-dropdown.show { display: block; }

        .user-dropdown a, .user-dropdown button {
            display: block; width: 100%; padding: 1rem 1.25rem;
            text-align: left; font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem; font-weight: 400; letter-spacing: 0.05em;
            text-transform: uppercase; text-decoration: none;
            color: var(--black); background: none; border: none;
            border-bottom: 1px solid var(--gray-mid);
            cursor: pointer; transition: background 0.2s;
        }

        .user-dropdown a:hover, .user-dropdown button:hover { background: var(--gray-light); }
        .user-dropdown .signout-btn { background: var(--black); color: var(--white); border: none; }
        .user-dropdown .signout-btn:hover { opacity: 0.9; background: var(--black); }

        .user-dropdown .user-email {
            font-size: 0.7rem; color: rgba(255,255,255,0.7);
            text-transform: none; letter-spacing: 0; margin-top: 0.25rem;
        }

        /* ═══════════════════════════════════════
           HERO — Typographic Minimalism
           ═══════════════════════════════════════ */
        .hero-section {
            background: #0a0a0a;
            padding: 6rem 1.5rem;
            text-align: center;
        }

        @keyframes gradientShift {
            0%   { background-position: 0% 50%; }
            50%  { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .hero-headline {
            font-family: 'PP Neue York Condensed', 'PP Neue York', Georgia, serif;
            font-size: clamp(3rem, 7vw, 5.5rem);
            font-weight: 900;
            letter-spacing: -0.01em;
            line-height: 1.05;
            text-transform: none;
            margin-bottom: 2.5rem;
            background: linear-gradient(270deg, #c4b5fd, #a5c8f2, #a7dbc8, #e0cfa0, #d4a5c4, #c4b5fd);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 20s ease infinite;
        }

        .hero-rule {
            width: 60px;
            height: 1px;
            background: rgba(255,255,255,0.1);
            margin: 0 auto 2.5rem;
        }

        .hero-search {
            display: flex;
            justify-content: center;
        }

        .hero-search-input {
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            padding: 0.75rem 0;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 1rem;
            font-weight: 300;
            color: #d4d4d4;
            width: 100%;
            max-width: 360px;
            text-align: center;
            letter-spacing: 0.02em;
            transition: border-color 0.3s;
        }

        .hero-search-input:focus {
            outline: none;
            border-bottom-color: rgba(255,255,255,0.4);
        }

        .hero-search-input::placeholder {
            color: rgba(255,255,255,0.2);
            font-weight: 300;
        }

        @media (max-width: 600px) {
            .hero-section { padding: 4rem 1.5rem; }
            .hero-search-input { max-width: 280px; font-size: 0.9rem; }
        }

        /* ═══════════════════════════════════════
           TAG STRIP — Droga5 minimal
           ═══════════════════════════════════════ */
        .tag-strip {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.5rem;
            position: sticky;
            top: var(--header-h, 56px);
            z-index: 999;
            background: #0a0a0a;
            border-top: 1px solid rgba(255,255,255,0.06);
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .tag-strip-left {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .tag-strip-center {
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            gap: 2.5rem;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tag-strip-center::-webkit-scrollbar { display: none; }

        .tag-strip-right {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .tag-item {
            background: none;
            border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.75rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.3);
            cursor: pointer;
            padding: 1.1rem 0;
            white-space: nowrap;
            transition: color 0.3s;
        }

        .tag-item:hover {
            color: rgba(255,255,255,0.6);
        }

        .tag-item.active {
            color: #fff;
        }

        /* Sort dropdown (left side of tag strip) */
        .ts-dropdown {
            position: relative;
            flex-shrink: 0;
        }

        .ts-btn {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            background: none;
            border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.75rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.3);
            cursor: pointer;
            padding: 1.1rem 0;
            white-space: nowrap;
            transition: color 0.3s;
        }

        .ts-btn:hover { color: rgba(255,255,255,0.6); }

        .ts-btn svg {
            width: 8px; height: 8px; stroke-width: 2.5;
            transition: transform 0.2s;
        }

        .ts-btn.open svg { transform: rotate(180deg); }

        .ts-panel {
            position: absolute; top: 100%; left: 0;
            min-width: 140px; background: #1a1a1a;
            border: 1px solid rgba(255,255,255,0.12);
            z-index: 100; display: none;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
        }

        .ts-panel.show { display: block; }

        .ts-option {
            display: block; width: 100%;
            padding: 0.7rem 1rem;
            background: none; border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.8rem; font-weight: 400;
            color: rgba(255,255,255,0.5); text-align: left;
            cursor: pointer; transition: all 0.2s;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .ts-option:last-child { border-bottom: none; }
        .ts-option:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .ts-option.active { color: #fff; font-weight: 500; }

        /* Press Feed button in tag strip */
        .press-feed-btn {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            background: none;
            border: 1.5px solid rgba(255,255,255,0.25);
            border-radius: 20px;
            padding: 0.4rem 0.9rem;
            font-family: inherit;
            font-size: 0.65rem;
            font-weight: 400;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.35);
            cursor: pointer;
            transition: all 0.25s ease;
            white-space: nowrap;
        }

        .press-feed-btn svg {
            stroke: rgba(255,255,255,0.35);
        }

        .press-feed-btn:hover,
        .press-feed-btn.active {
            background: var(--white);
            color: var(--black);
            border-color: var(--white);
        }

        .press-feed-btn:hover svg,
        .press-feed-btn.active svg {
            stroke: var(--black);
        }

        /* Toolbar Search (visible in press feed mode) */
        .ts-search {
            display: none;
            flex: 1;
            justify-content: center;
            align-items: center;
            padding: 0.5rem 1rem;
        }

        .ts-search-container {
            display: flex;
            width: 100%;
            max-width: 420px;
        }

        .ts-search-input {
            flex: 1;
            padding: 0.55rem 0;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.85rem;
            font-weight: 300;
            background: transparent;
            color: #d4d4d4;
            min-width: 0;
        }

        .ts-search-input:focus { outline: none; border-bottom-color: rgba(255,255,255,0.4); }
        .ts-search-input::placeholder { color: rgba(255,255,255,0.2); }

        .ts-search-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.55rem 0.6rem;
            background: none;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            cursor: pointer;
        }

        .ts-search-btn svg {
            width: 16px;
            height: 16px;
            stroke: rgba(255,255,255,0.3);
            stroke-width: 2;
        }

        .ts-search-btn:hover svg { stroke: rgba(255,255,255,0.6); }

        /* Press Feed active state */
        body.press-feed-active .hero-section { display: none; }
        body.press-feed-active .tag-strip-center { display: none; }
        body.press-feed-active .ts-search { display: flex; }

        /* Mobile tag strip: Event Type dropdown */
        .ts-mobile-only { display: none; }
        .ts-desktop-only { display: flex; }

        /* More dropdown — hidden by default on wide screens */
        .ts-more-wrap { display: none; }
        .ts-more-btn {
            display: flex;
            align-items: center;
        }
        .ts-more-btn svg { stroke: currentColor; }
        .ts-more-btn.open svg { transform: rotate(180deg); }
        .ts-more-panel { left: auto; right: 0; }

        /* ── Progressive collapse: first breakpoint ── */
        /* Below 1000px: hide Portraits + Party, show More */
        @media (max-width: 1000px) {
            .tag-item.tag-p1 { display: none; }
            .ts-more-wrap { display: block; }
            .tag-strip-center { gap: 1.8rem; }
            /* Only show Portraits + Party in the More panel */
            .ts-more-panel .ts-option[onclick*="corporate"] { display: none; }
        }

        /* ── Progressive collapse: second breakpoint ── */
        /* Below 850px: also hide Corporate */
        @media (max-width: 850px) {
            .tag-item.tag-p2 { display: none; }
            /* Now show Corporate in the More panel too */
            .ts-more-panel .ts-option[onclick*="corporate"] { display: block; }
        }

        /* ── Mobile: all tags collapse to Event Type dropdown ── */
        @media (max-width: 768px) {
            .ts-desktop-only { display: none !important; }
            .ts-mobile-only { display: flex !important; }
            .tag-strip { padding: 0 0.75rem; }
            .tag-strip-center { gap: 1.5rem; justify-content: flex-start; flex: 0; }
            .ts-btn { font-size: 0.7rem; padding: 0.9rem 0; }
            .press-feed-btn { padding: 0.3rem 0.65rem; font-size: 0.6rem; }
            .ts-search { padding: 0.5rem 0.5rem; }
            .ts-search-input { font-size: 0.8rem; }
        }

        /* ═══════════════════════════════════════
           GALLERY GRID
           ═══════════════════════════════════════ */
        .gallery-section { padding: var(--gap) 1.5rem 5rem; background: #0a0a0a; }

        .unified-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--gap);
        }

        .g-project {
            position: relative; overflow: hidden;
            cursor: pointer; background: #111;
            contain: layout style paint;
            will-change: transform;
        }

        .g-project img {
            width: 100%; aspect-ratio: 4 / 3;
            object-fit: cover; display: block;
            transition: transform 0.4s ease;
            content-visibility: auto;
        }

        .g-project:hover img { transform: scale(1.03); }

        /* Private project overlay */
        .g-private-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.65);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            pointer-events: none;
        }

        .g-lock-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .g-lock-icon svg {
            width: 28px;
            height: 28px;
            stroke: rgba(255, 255, 255, 0.7);
        }

        .g-overlay {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
            padding: 4rem 1rem 1rem; color: white;
            z-index: 2;
        }

        .g-date { font-size: 0.75rem; font-weight: 300; letter-spacing: 0.02em; margin-bottom: 0.35rem; opacity: 0.9; }
        .g-title { font-size: 0.9rem; font-weight: 500; letter-spacing: 0.08em; text-transform: uppercase; line-height: 1.35; margin-bottom: 0.3rem; }
        .g-venue { font-size: 0.8rem; font-weight: 300; opacity: 0.85; margin-bottom: 0.5rem; }
        .g-count { display: flex; align-items: center; gap: 0.4rem; font-size: 0.75rem; font-weight: 300; opacity: 0.8; }
        .g-count svg { width: 14px; height: 14px; }

        /* ═══════════════════════════════════════
           REVIEW SLIDESHOW TILE
           ═══════════════════════════════════════ */
        .g-review-slideshow {
            grid-column: span 2; grid-row: span 2;
            position: relative; overflow: hidden;
            background: #0f0f0f;
            border: 1px solid rgba(255,255,255,0.04);
        }

        .g-review-slide {
            position: absolute; inset: 0;
            display: flex; flex-direction: column; justify-content: center;
            padding: 2.5rem 3rem 3rem;
            opacity: 0; transition: opacity 0.8s ease; z-index: 0;
        }

        .g-review-slide.active { opacity: 1; z-index: 1; }

        .g-review-slide .quote-text {
            font-size: 1.35rem; font-weight: 300;
            line-height: 1.45; color: #d4d4d4; margin-bottom: 1.25rem;
            letter-spacing: -0.01em;
        }

        .g-review-slide .quote-text::before { content: '\201C'; }
        .g-review-slide .quote-text::after  { content: '\201D'; }

        .g-review-slide .quote-attr {
            font-size: 0.75rem; font-weight: 400;
            color: rgba(255,255,255,0.35); letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .g-review-slide .quote-attr span { color: rgba(255,255,255,0.6); }

        .g-review-slide .quote-stars { display: flex; gap: 0.2rem; margin-bottom: 1rem; }
        .g-review-slide .quote-stars svg { width: 14px; height: 14px; fill: rgba(255,255,255,0.25); }

        .g-review-dots {
            position: absolute; bottom: 1.25rem; left: 3rem;
            display: flex; gap: 0.5rem; z-index: 2;
        }

        .g-review-dot {
            width: 6px; height: 6px; border-radius: 50%;
            background: rgba(255,255,255,0.12); cursor: pointer; transition: background 0.3s;
        }

        .g-review-dot.active { background: rgba(255,255,255,0.5); }

        /* Loading */
        .loading, .empty-state { text-align: center; padding: 6rem 2rem; grid-column: 1 / -1; }

        .spinner {
            width: 24px; height: 24px;
            border: 1.5px solid rgba(255,255,255,0.08); border-top-color: rgba(255,255,255,0.4);
            border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* ═══════════════════════════════════════
           CART SIDEBAR
           ═══════════════════════════════════════ */
        .cart-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.4); z-index: 1999;
            opacity: 0; visibility: hidden; transition: opacity 0.3s;
        }

        .cart-overlay.open { opacity: 1; visibility: visible; }

        .cart-sidebar {
            position: fixed; top: 0; right: -400px;
            width: 400px; height: 100vh;
            background: #111; color: #d4d4d4; z-index: 2000;
            transition: right 0.3s;
            display: flex; flex-direction: column;
            box-shadow: -4px 0 20px rgba(0,0,0,0.5);
        }

        .cart-sidebar.open { right: 0; }

        .cart-header {
            padding: 1.5rem 1.75rem;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            display: flex; justify-content: space-between; align-items: center;
        }

        .cart-header h2 {
            font-size: 0.9rem; font-weight: 500;
            letter-spacing: 0.1em; text-transform: uppercase;
            color: #d4d4d4;
        }

        .cart-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: rgba(255,255,255,0.4); }
        .cart-close:hover { color: #fff; }
        .cart-items { flex: 1; overflow-y: auto; padding: 1.5rem 1.75rem; }

        .cart-item {
            display: flex; gap: 1rem; padding: 1rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .cart-item:first-child { padding-top: 0; }
        .cart-item-image { width: 70px; height: 52px; object-fit: cover; border-radius: 2px; }
        .cart-item-info { flex: 1; }
        .cart-item-title { font-size: 0.85rem; font-weight: 400; margin-bottom: 0.2rem; color: #d4d4d4; }
        .cart-item-license { font-size: 0.75rem; color: rgba(255,255,255,0.35); font-weight: 300; }
        .cart-item-price { font-size: 0.85rem; font-weight: 500; margin-top: 0.25rem; color: #d4d4d4; }
        .cart-item-remove { background: none; border: none; color: rgba(255,255,255,0.3); cursor: pointer; font-size: 1.25rem; }
        .cart-item-remove:hover { color: #fff; }

        .cart-footer {
            padding: 1.5rem 1.75rem;
            border-top: 1px solid rgba(255,255,255,0.08);
            background: #0a0a0a;
        }

        .cart-total {
            display: flex; justify-content: space-between;
            font-size: 1rem; font-weight: 500; margin-bottom: 1rem;
            color: #d4d4d4;
        }

        .checkout-btn {
            width: 100%; padding: 1rem;
            background: #fff; color: #0a0a0a; border: none;
            font-family: 'PP Neue York', Georgia, serif;
            font-size: 0.8rem; font-weight: 400;
            letter-spacing: 0.12em; text-transform: uppercase; cursor: pointer;
        }

        .checkout-btn:hover:not(:disabled) { opacity: 0.8; }
        .checkout-btn:disabled { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.2); cursor: not-allowed; }

        /* ═══════════════════════════════════════
           FOOTER — Ultra-minimal
           ═══════════════════════════════════════ */
        .footer {
            padding: 3rem 1.5rem;
            background: #0a0a0a;
            border-top: 1px solid rgba(255,255,255,0.04);
        }

        .footer-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-left {
            font-size: 0.7rem;
            color: rgba(255,255,255,0.25);
            letter-spacing: 0.05em;
        }

        .footer-right {
            display: flex;
            gap: 2rem;
        }

        .footer-right a {
            color: rgba(255,255,255,0.25);
            text-decoration: none;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
            transition: color 0.3s;
        }

        .footer-right a:hover {
            color: rgba(255,255,255,0.5);
        }

        /* ═══════════════════════════════════════
           RESPONSIVE
           ═══════════════════════════════════════ */
        @media (max-width: 1100px) {
            .unified-grid { grid-template-columns: repeat(3, 1fr); }
            .g-review-slideshow { grid-column: 1 / -1; grid-row: span 1; min-height: 220px; }
            .g-review-slide { padding: 2rem 2.5rem 2.5rem; }
            .g-review-dots { left: 2.5rem; }
        }

        @media (max-width: 850px) {
            .unified-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 750px) {
            .header-inner { padding: 1.25rem 0.75rem; }
            .gallery-section { padding: 0 0.75rem 3rem; }
            .g-review-slideshow { min-height: 240px; }
            .g-review-slide { padding: 1.75rem 1.75rem 3rem; }
            .g-review-slide .quote-text { font-size: 1.1rem; }
            .g-review-dots { left: 1.75rem; bottom: 1.25rem; }
            .footer-inner { flex-direction: column; gap: 1rem; text-align: center; }
        }

        @media (max-width: 500px) {
            .unified-grid { grid-template-columns: 1fr; gap: 6px; }
            .g-review-slideshow { grid-column: span 1; grid-row: span 1; }
            .g-overlay { padding: 2rem 0.75rem 0.75rem; }
            .g-title { font-size: 0.8rem; }
            .g-venue { font-size: 0.7rem; }
            .g-date { font-size: 0.65rem; }
            .g-count { font-size: 0.65rem; }
            .g-review-slideshow { min-height: 180px; }
            .g-review-slide { padding: 1.5rem 1.25rem 2rem; }
            .g-review-slide .quote-text { font-size: 1rem; }
            .g-review-dots { left: 1.25rem; bottom: 0.75rem; }
            .header-inner { padding: 1rem 0.75rem; }
            .nav { gap: 1.5rem; }
            .nav a { font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="header-left">
                <button class="hamburger" onclick="openMobileMenu()" aria-label="Open menu">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
                <a href="/" class="logo">SF EVENT PHOTO</a>
            </div>
            <nav class="nav">
                <div class="nav-links">
                    <div class="nav-dropdown" id="aboutDropdown">
                        <button class="nav-dropdown-trigger" onclick="toggleNavDropdown('aboutDropdown')">
                            About
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div class="nav-dropdown-panel">
                            <a href="/about.html">Current</a>
                            <a href="/about-v1.html">V1 — Editorial</a>
                            <a href="/about-v2.html">V2 — Info Grid</a>
                            <a href="/about-v3.html">V3 — Cinematic</a>
                            <a href="/about-v4.html">V4 — Photo Hero</a>
                            <a href="/about-v5.html">V5 — Video + Grid</a>
                            <a href="/about-v6.html">V6 — Magazine</a>
                        </div>
                    </div>
                    <div class="nav-dropdown" id="servicesDropdown">
                        <button class="nav-dropdown-trigger" onclick="toggleNavDropdown('servicesDropdown')">
                            Services
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div class="nav-dropdown-panel">
                            <a href="/services.html">Current</a>
                            <a href="/services-v1.html">V1 — Accordion</a>
                            <a href="/services-v2.html">V2 — Grid</a>
                            <a href="/services-v3.html">V3 — Full-Width</a>
                            <a href="/services-v4.html">V4 — Image Pairs</a>
                            <a href="/services-v5.html">V5 — Video + Cards</a>
                            <a href="/services-v6.html">V6 — Parallax</a>
                        </div>
                    </div>
                    <a href="/contact.html">Contact</a>
                    <div class="nav-dropdown" id="adsDropdown">
                        <button class="nav-dropdown-trigger" onclick="toggleNavDropdown('adsDropdown')">
                            Ads
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div class="nav-dropdown-panel">
                            <a href="/ad-sf-event.html">SF Event Photographers</a>
                            <a href="/ad-la-event.html">LA Event Photographers</a>
                            <a href="/ad-corporate.html">Corporate Photography</a>
                            <a href="/ad-brand-activation.html">Brand Activation</a>
                            <a href="/ad-conference.html">Conference Photography</a>
                            <a href="/ad-v1-sf-event.html">V1 — Video Hero</a>
                            <a href="/ad-v2-sf-event.html">V2 — Split Editorial</a>
                            <a href="/ad-v3-sf-event.html">V3 — Marquee</a>
                            <a href="/ad-v6-sf-event.html">V6 — Droga5</a>
                        </div>
                    </div>
                </div>
                <div class="nav-actions">
                    <a href="/signin.html" class="auth-link" id="signInLink">Sign In</a>
                    <div class="user-menu" id="userMenu" style="display: none;">
                        <button class="user-menu-btn" onclick="toggleUserMenu()">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                            <span id="userName">Account</span>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="/my-photos.html">My Photos</a>
                            <button class="signout-btn" onclick="signOut()">
                                Sign Out
                                <div class="user-email" id="userEmail"></div>
                            </button>
                        </div>
                    </div>
                    <a href="#" class="cart-link" onclick="toggleCart(); return false;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        <span class="cart-badge" id="cartCount">0</span>
                    </a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <a href="/" class="logo">SF EVENT PHOTO</a>
            <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close menu">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <nav class="mobile-menu-links">
            <a href="/">Home</a>
            <a href="/about.html">About</a>
            <a href="/services.html">Services</a>
            <a href="/contact.html">Contact</a>
        </nav>
    </div>

    <!-- Hero — Typographic Minimalism -->
    <section class="hero-section">
        <h1 class="hero-headline">San Francisco Event Photographers</h1>
        <div class="hero-rule"></div>
        <div class="hero-search">
            <input type="text" class="hero-search-input" id="searchInput" placeholder="Search people, brands, or events">
        </div>
    </section>

    <!-- Tag Strip -->
    <div class="tag-strip">
        <!-- Sort (left) -->
        <div class="tag-strip-left">
            <div class="ts-dropdown" id="sortDropdownWrap">
                <button class="ts-btn" id="sortBtn" onclick="toggleSortDropdown()">
                    <span id="sortLabel">Sort</span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="ts-panel" id="sortPanel">
                    <button class="ts-option active" onclick="selectSort('featured','Featured')">Featured</button>
                    <button class="ts-option" onclick="selectSort('newest','Newest')">Newest</button>
                    <button class="ts-option" onclick="selectSort('oldest','Oldest')">Oldest</button>
                </div>
            </div>
        </div>

        <!-- Center: Category tags (desktop) — progressive collapse -->
        <div class="tag-strip-center ts-desktop-only">
            <button class="tag-item active" onclick="selectCategory('all', this)">All</button>
            <button class="tag-item" onclick="selectCategory('activation', this)">Activations</button>
            <button class="tag-item" onclick="selectCategory('conference', this)">Conferences</button>
            <button class="tag-item" onclick="selectCategory('video', this)">Video</button>
            <button class="tag-item tag-p2" onclick="selectCategory('corporate', this)">Corporate</button>
            <button class="tag-item tag-p1" onclick="selectCategory('portraits', this)">Portraits</button>
            <button class="tag-item tag-p1" onclick="selectCategory('party', this)">Party</button>

            <!-- More dropdown (hidden on wide screens, shown as tags collapse) -->
            <div class="ts-dropdown ts-more-wrap">
                <button class="tag-item ts-more-btn" id="moreBtn" onclick="toggleMoreDropdown()">
                    More
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width:8px;height:8px;stroke-width:2.5;margin-left:0.25rem;vertical-align:middle;transition:transform 0.2s">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="ts-panel ts-more-panel" id="morePanel">
                    <button class="ts-option" onclick="selectCategoryFromMore('corporate', 'Corporate')">Corporate</button>
                    <button class="ts-option" onclick="selectCategoryFromMore('portraits', 'Portraits')">Portraits</button>
                    <button class="ts-option" onclick="selectCategoryFromMore('party', 'Party')">Party</button>
                </div>
            </div>
        </div>

        <!-- Center: Event Type dropdown (mobile) -->
        <div class="tag-strip-center ts-mobile-only">
            <div class="ts-dropdown" id="eventTypeDropdownWrap">
                <button class="ts-btn" id="eventTypeBtn" onclick="toggleEventTypeDropdown()">
                    <span id="eventTypeLabel">Event Type</span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="ts-panel" id="eventTypePanel">
                    <button class="ts-option active" onclick="selectEventType('all', 'All')">All</button>
                    <button class="ts-option" onclick="selectEventType('activation', 'Activations')">Activations</button>
                    <button class="ts-option" onclick="selectEventType('conference', 'Conferences')">Conferences</button>
                    <button class="ts-option" onclick="selectEventType('video', 'Video')">Video</button>
                    <button class="ts-option" onclick="selectEventType('corporate', 'Corporate')">Corporate</button>
                    <button class="ts-option" onclick="selectEventType('portraits', 'Portraits')">Portraits</button>
                    <button class="ts-option" onclick="selectEventType('party', 'Party')">Party</button>
                </div>
            </div>
        </div>

        <!-- Toolbar Search (visible in press feed mode) -->
        <div class="ts-search">
            <div class="ts-search-container">
                <input type="text" class="ts-search-input" id="tbSearchInput" placeholder="Search people, brands, or events">
                <button class="ts-search-btn" onclick="doToolbarSearch()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="11" cy="11" r="8"/><path stroke-linecap="round" d="m21 21-4.35-4.35"/></svg>
                </button>
            </div>
        </div>

        <!-- Press Feed (right) -->
        <div class="tag-strip-right">
            <button class="press-feed-btn" id="pressFeedBtn" onclick="togglePressFeed()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" width="13" height="13">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z"/>
                </svg>
                Press Feed
            </button>
        </div>
    </div>

    <!-- Gallery Grid -->
    <section class="gallery-section">
        <div class="unified-grid" id="unifiedGrid">
            <div class="loading"><div class="spinner"></div></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-inner">
            <div class="footer-left">
                <span>&copy; 2026 SF Event Photo</span>
            </div>
            <div class="footer-right">
                <a href="mailto:bookings@sfeventphoto.com">Email</a>
                <a href="https://instagram.com/sfeventphoto" target="_blank">Instagram</a>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Cart</h2>
            <button class="cart-close" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-state"><p>Your cart is empty</p></div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn" disabled onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <script>
        const API_URL = 'https://sf-event-photo-backend.vercel.app';
        let projects = [];
        let currentFilter = 'all';
        let currentSort = 'featured';
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');

        const reviews = [
            { quote: "I manage corporate events across 7 states and this is by far my favorite photography team. They are quick to respond, adaptable, and deliver on timelines.", name: "Michelle H", company: "Lockton" },
            { quote: "The experience was amazing from the first time we spoke. Every moment and detail was perfectly captured with great quality.", name: "Lucia M", company: "MarketLogic" },
            { quote: "A top professional from start to finish. Full of positive energy during the event and the final photos were stunning.", name: "Maude P", company: "BlockChain Game Alliance" },
            { quote: "We hired SF Event Photo for our corporate event and couldn't be happier. The photos are absolutely stunning.", name: "Yajaira C", company: "StarSpace Global" },
            { quote: "The attention to detail and creativity truly set them apart. We highly recommend SF Event Photo.", name: "Lauren R", company: "Transforming Age" },
            { quote: "I hired SF Event Photo for my company's biggest events and they did a fantastic job! Completely professional.", name: "Garnette R", company: "BXP" }
        ];

        const starSVG = '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';

        /* ── Nav Dropdowns ── */
        function toggleNavDropdown(id) {
            const dropdown = document.getElementById(id);
            const isOpen = dropdown.classList.contains('open');
            document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            if (!isOpen) dropdown.classList.add('open');
        }

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            }
        });

        /* ── Mobile Menu ── */
        function openMobileMenu() {
            document.getElementById('mobileMenu').classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            document.getElementById('mobileMenu').classList.remove('open');
            document.body.style.overflow = '';
        }

        /* ── Auth ── */
        function checkAuth() {
            const u = localStorage.getItem('user');
            if (u) {
                const user = JSON.parse(u);
                document.getElementById('signInLink').style.display = 'none';
                document.getElementById('userMenu').style.display = 'block';
                document.getElementById('userName').textContent = user.name.split(' ')[0];
                document.getElementById('userEmail').textContent = user.email;
            }
        }

        function toggleUserMenu() { document.getElementById('userDropdown').classList.toggle('show'); }

        document.addEventListener('click', e => {
            if (!e.target.closest('.user-menu')) document.getElementById('userDropdown')?.classList.remove('show');
        });

        function signOut() { localStorage.removeItem('user'); localStorage.removeItem('token'); location.reload(); }

        /* ── Cart ── */
        function toggleCart() {
            document.getElementById('cartSidebar').classList.toggle('open');
            document.getElementById('cartOverlay').classList.toggle('open');
        }

        function updateCartUI() {
            const items = document.getElementById('cartItems');
            const count = document.getElementById('cartCount');
            const total = document.getElementById('cartTotal');
            const btn = document.getElementById('checkoutBtn');
            count.textContent = cart.length;
            count.classList.toggle('show', cart.length > 0);
            if (!cart.length) {
                items.innerHTML = '<div class="empty-state"><p>Your cart is empty</p></div>';
                total.textContent = '$0.00'; btn.disabled = true; return;
            }
            let sum = 0;
            items.innerHTML = cart.map((it, i) => {
                sum += it.price;
                return `<div class="cart-item"><img src="${it.thumbnail}" class="cart-item-image"><div class="cart-item-info"><div class="cart-item-title">${it.title}</div><div class="cart-item-license">${it.license} License</div><div class="cart-item-price">$${(it.price/100).toFixed(2)}</div></div><button class="cart-item-remove" onclick="removeFromCart(${i})">&times;</button></div>`;
            }).join('');
            total.textContent = `$${(sum/100).toFixed(2)}`; btn.disabled = false;
        }

        function removeFromCart(i) { cart.splice(i,1); localStorage.setItem('cart',JSON.stringify(cart)); updateCartUI(); }

        /* ── Search ── */
        function doSearch() {
            const q = document.getElementById('searchInput').value.trim();
            if (q) location.href = `/search.html?q=${encodeURIComponent(q)}`;
        }

        function doToolbarSearch() {
            const q = document.getElementById('tbSearchInput').value.trim();
            if (q) location.href = `/search.html?q=${encodeURIComponent(q)}`;
        }

        /* ── Tag Strip Dropdowns ── */
        function closeAllDropdowns() {
            document.querySelectorAll('.ts-panel').forEach(p => p.classList.remove('show'));
            document.querySelectorAll('.ts-btn').forEach(b => b.classList.remove('open'));
            document.getElementById('moreBtn')?.classList.remove('open');
        }

        function toggleSortDropdown() {
            const panel = document.getElementById('sortPanel');
            const btn = document.getElementById('sortBtn');
            const isOpen = panel.classList.contains('show');
            closeAllDropdowns();
            if (!isOpen) {
                panel.classList.add('show');
                btn.classList.add('open');
            }
        }

        function toggleEventTypeDropdown() {
            const panel = document.getElementById('eventTypePanel');
            const btn = document.getElementById('eventTypeBtn');
            const isOpen = panel.classList.contains('show');
            closeAllDropdowns();
            if (!isOpen) {
                panel.classList.add('show');
                btn.classList.add('open');
            }
        }

        document.addEventListener('click', e => {
            if (!e.target.closest('.ts-dropdown')) {
                closeAllDropdowns();
            }
        });

        function toggleMoreDropdown() {
            const panel = document.getElementById('morePanel');
            const btn = document.getElementById('moreBtn');
            const isOpen = panel.classList.contains('show');
            closeAllDropdowns();
            if (!isOpen) {
                panel.classList.add('show');
                btn.classList.add('open');
            }
        }

        function selectCategory(val, btn) {
            currentFilter = val;
            document.querySelectorAll('.tag-item').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            // Clear active state from More dropdown options
            document.querySelectorAll('#morePanel .ts-option').forEach(o => o.classList.remove('active'));
            syncEventTypeDropdown(val);
            renderGallery();
        }

        function selectCategoryFromMore(val, label) {
            currentFilter = val;
            // Remove active from all visible tags
            document.querySelectorAll('.tag-item').forEach(t => t.classList.remove('active'));
            // Update active state in More dropdown
            document.querySelectorAll('#morePanel .ts-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim() === label);
            });
            // Close dropdown
            document.getElementById('morePanel').classList.remove('show');
            document.getElementById('moreBtn').classList.remove('open');
            syncEventTypeDropdown(val);
            renderGallery();
        }

        function selectEventType(val, label) {
            currentFilter = val;
            document.getElementById('eventTypeLabel').textContent = label;
            document.querySelectorAll('#eventTypePanel .ts-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim() === label);
            });
            document.getElementById('eventTypePanel').classList.remove('show');
            document.getElementById('eventTypeBtn').classList.remove('open');
            // Sync desktop tags
            document.querySelectorAll('.tag-item').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#morePanel .ts-option').forEach(o => o.classList.remove('active'));
            document.querySelectorAll('.tag-item').forEach(t => {
                if (t.textContent.trim().toLowerCase() === label.toLowerCase() ||
                    (val === 'all' && t.textContent.trim() === 'All')) {
                    t.classList.add('active');
                }
            });
            // Sync More dropdown active state
            document.querySelectorAll('#morePanel .ts-option').forEach(o => {
                if (o.textContent.trim().toLowerCase() === label.toLowerCase()) {
                    o.classList.add('active');
                }
            });
            renderGallery();
        }

        function syncEventTypeDropdown(val) {
            const options = document.querySelectorAll('#eventTypePanel .ts-option');
            options.forEach(o => {
                const isActive = o.textContent.trim().toLowerCase().includes(val) ||
                                 (val === 'all' && o.textContent.trim() === 'All');
                o.classList.toggle('active', isActive);
                if (isActive) {
                    document.getElementById('eventTypeLabel').textContent = o.textContent.trim();
                }
            });
        }

        function selectSort(val, label) {
            currentSort = val;
            document.getElementById('sortLabel').textContent = label;
            document.querySelectorAll('#sortPanel .ts-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim().toLowerCase() === val);
            });
            document.getElementById('sortPanel').classList.remove('show');
            document.getElementById('sortBtn').classList.remove('open');
            deactivatePressFeed();
            renderGallery();
        }

        /* ── Press Feed ── */
        let pressFeedActive = false;

        function activatePressFeed() {
            pressFeedActive = true;
            document.body.classList.add('press-feed-active');
            document.getElementById('pressFeedBtn')?.classList.add('active');
            currentSort = 'newest';
            currentFilter = 'all';
            document.getElementById('sortLabel').textContent = 'Newest';
            document.querySelectorAll('#sortPanel .ts-option').forEach(o => {
                o.classList.toggle('active', o.textContent.trim() === 'Newest');
            });
            document.querySelectorAll('.tag-item').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tag-item').forEach(t => {
                if (t.textContent.trim() === 'All') t.classList.add('active');
            });
            syncEventTypeDropdown('all');
            renderGallery();
            document.getElementById('tbSearchInput')?.focus();
        }

        function deactivatePressFeed() {
            pressFeedActive = false;
            document.body.classList.remove('press-feed-active');
            document.getElementById('pressFeedBtn')?.classList.remove('active');
            document.getElementById('tbSearchInput').value = '';
        }

        function togglePressFeed() {
            if (pressFeedActive) {
                deactivatePressFeed();
                selectSort('featured', 'Featured');
            } else {
                activatePressFeed();
            }
        }

        /* ── Helpers ── */
        function formatDateRange(s, e) {
            if (!s) return '';
            const d = new Date(s), sm = d.toLocaleDateString('en-US',{month:'short'}), sd = d.getDate(), sy = d.getFullYear();
            if (!e) return `${sm} ${sd}, ${sy}`;
            const d2 = new Date(e), em = d2.toLocaleDateString('en-US',{month:'short'}), ed = d2.getDate(), ey = d2.getFullYear();
            if (sm===em && sy===ey) return `${sm} ${sd}-${ed}, ${sy}`;
            if (sy===ey) return `${sm} ${sd} - ${em} ${ed}, ${sy}`;
            return `${sm} ${sd}, ${sy} - ${em} ${ed}, ${ey}`;
        }

        function viewProject(slug) { location.href = `/project.html?slug=${slug}`; }

        /* ── Tiles ── */
        const lockIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg>`;
        const photoIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/></svg>`;

        function tile(p) {
            const tag = Array.isArray(p.tags) && p.tags.length ? p.tags[0] : (p.event_type || '');
            const tagDisplay = Array.isArray(p.tags) && p.tags.length ? p.tags.join(' · ') : (p.event_type || '');
            const topLine = currentSort === 'featured'
                ? tagDisplay
                : formatDateRange(p.event_date, p.event_end_date);
            const dateStr = formatDateRange(p.event_date, p.event_end_date);
            const isPrivate = p.is_private === true;
            return `<div class="g-project ${isPrivate ? 'g-project-private' : ''}" onclick="viewProject('${p.slug}')">
                <img src="${p.cover_image_url||'https://via.placeholder.com/600x450'}" alt="${p.title}" loading="lazy">
                ${isPrivate ? `<div class="g-private-overlay"><div class="g-lock-icon">${lockIcon}</div></div>` : ''}
                <div class="g-overlay">
                    ${topLine ? `<div class="g-date">${topLine}</div>` : ''}
                    <div class="g-title">${p.title}</div>
                    ${p.venue?`<div class="g-venue">${p.venue}</div>`:''}
                    <div class="g-count">${photoIcon} ${p.photo_count||0}</div>
                </div>
            </div>`;
        }

        function reviewSlideshowTile() {
            const slides = reviews.map((r,i) =>
                `<div class="g-review-slide ${i===0?'active':''}" data-slide="${i}">
                    <div class="quote-stars">${starSVG.repeat(5)}</div>
                    <p class="quote-text">${r.quote}</p>
                    <div class="quote-attr"><span>${r.name}</span> — ${r.company}</div>
                </div>`
            ).join('');
            const dots = reviews.map((_,i) =>
                `<div class="g-review-dot ${i===0?'active':''}" onclick="goToReview(${i})"></div>`
            ).join('');
            return `<div class="g-review-slideshow" id="reviewSlideshow">${slides}<div class="g-review-dots">${dots}</div></div>`;
        }

        /* ── Review Slideshow ── */
        let currentReview = 0, reviewInterval;

        function goToReview(idx) {
            const c = document.getElementById('reviewSlideshow');
            if (!c) return;
            const slides = c.querySelectorAll('.g-review-slide');
            const dots = c.querySelectorAll('.g-review-dot');
            slides[currentReview].classList.remove('active');
            dots[currentReview].classList.remove('active');
            currentReview = idx;
            slides[currentReview].classList.add('active');
            dots[currentReview].classList.add('active');
            clearInterval(reviewInterval);
            reviewInterval = setInterval(() => goToReview((currentReview+1)%reviews.length), 5000);
        }

        function startReviewSlideshow() {
            currentReview = 0;
            clearInterval(reviewInterval);
            reviewInterval = setInterval(() => goToReview((currentReview+1)%reviews.length), 5000);
        }

        /* ── Sort helpers ── */
        function sortProjects(list) {
            if (currentSort === 'newest') {
                return [...list].sort((a,b) => {
                    const da = a.event_date ? new Date(a.event_date) : new Date(0);
                    const db = b.event_date ? new Date(b.event_date) : new Date(0);
                    return db - da;
                });
            }
            if (currentSort === 'oldest') {
                return [...list].sort((a,b) => {
                    const da = a.event_date ? new Date(a.event_date) : new Date(0);
                    const db = b.event_date ? new Date(b.event_date) : new Date(0);
                    return da - db;
                });
            }
            return [...list].sort((a,b) => {
                if (a.featured && !b.featured) return -1;
                if (!a.featured && b.featured) return 1;
                if (a.featured && b.featured) {
                    return (a.featured_order || 0) - (b.featured_order || 0);
                }
                const da = a.event_date ? new Date(a.event_date) : new Date(0);
                const db = b.event_date ? new Date(b.event_date) : new Date(0);
                return db - da;
            });
        }

        /* ── Gallery Render ── */
        function renderGallery() {
            const grid = document.getElementById('unifiedGrid');
            let filtered = projects;

            if (currentFilter !== 'all') {
                filtered = projects.filter(p => {
                    const tags = (Array.isArray(p.tags) ? p.tags : []).map(t => t.toLowerCase());
                    const et = (p.event_type || '').toLowerCase();
                    return tags.includes(currentFilter) || et === currentFilter;
                });
            }
            filtered = sortProjects(filtered);

            if (!filtered.length) {
                grid.innerHTML = '<div class="empty-state"><p>No projects found.</p></div>';
                return;
            }

            let html = '', pi = 0;
            const wall = Math.min(10, filtered.length);
            for (let i = 0; i < wall; i++) html += tile(filtered[pi++]);

            if (filtered.length > 6) {
                html += reviewSlideshowTile();
                for (let i = 0; i < 6 && pi < filtered.length; i++) html += tile(filtered[pi++]);
            }

            while (pi < filtered.length) html += tile(filtered[pi++]);
            grid.innerHTML = html;
            startReviewSlideshow();
        }

        /* ── Load ── */
        async function loadProjects() {
            try {
                const res = await fetch(`${API_URL}/api/projects`);
                const data = await res.json();
                if (data.error) throw new Error(data.error);
                projects = (data.projects||[]).sort((a,b) => (a.sort_order||0) - (b.sort_order||0));
                renderGallery();
            } catch(e) {
                document.getElementById('unifiedGrid').innerHTML = `<div class="empty-state"><h3>Error</h3><p>${e.message}</p></div>`;
            }
        }

        /* ── Checkout ── */
        async function checkout() {
            const token = localStorage.getItem('token');
            if (!token) { location.href = '/signin.html'; return; }
            const btn = document.getElementById('checkoutBtn');
            btn.disabled = true; btn.textContent = 'Processing...';
            try {
                const res = await fetch(`${API_URL}/api/checkout`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },
                    body: JSON.stringify({ items: cart })
                });
                const data = await res.json();
                if (data.url) window.location.href = data.url;
                else throw new Error(data.error || 'Checkout failed');
            } catch(e) {
                alert(e.message);
                btn.disabled = false; btn.textContent = 'Proceed to Checkout';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            checkAuth(); updateCartUI(); loadProjects();
            document.getElementById('searchInput').addEventListener('keydown', e => { if (e.key==='Enter') doSearch(); });
            document.getElementById('tbSearchInput').addEventListener('keydown', e => { if (e.key==='Enter') doToolbarSearch(); });

            // Measure header height for sticky tag strip offset
            const header = document.querySelector('.header');
            function setHeaderHeight() {
                document.documentElement.style.setProperty('--header-h', header.offsetHeight + 'px');
            }
            setHeaderHeight();
            window.addEventListener('resize', setHeaderHeight);
        });
    </script>
</body>
</html>
